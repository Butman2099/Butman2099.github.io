<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Моделювання складних систем у Python - 14&nbsp; Лабораторна робота № 14</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./appa.html" rel="next">
<link href="./lab_13.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "Пошук не дав результату",
    "search-matching-documents-text": "Результати пошуку",
    "search-copy-link-title": "Скопіюйте посилання для пошуку",
    "search-hide-matches-text": "Приховати додаткові результати",
    "search-more-match-text": "Додатковий результат у цьому документі",
    "search-more-matches-text": "Додаткові результати у цьому документі",
    "search-clear-button-title": "Очистити",
    "search-detached-cancel-button-title": "Скасувати",
    "search-submit-button-title": "Надіслати",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<link rel="stylesheet" href="style.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./lab_14.html"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Лабораторна робота № 14</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Моделювання складних систем у Python</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/Butman2099/Complex-systems-book" rel="" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <a href="./Моделювання-складних-систем-у-Python.docx" rel="" title="Download Docx" class="quarto-navigation-tool px-1" aria-label="Download Docx"><i class="bi bi-file-word"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Передмова</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Лабораторна робота № 1</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Лабораторна робота № 2</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Лабораторна робота № 3</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Лабораторна робота № 4</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Лабораторна робота № 5</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Лабораторна робота № 6</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Лабораторна робота № 7</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Лабораторна робота № 8</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_9.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Лабораторна робота № 9</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_10.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Лабораторна робота № 10</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_11.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Лабораторна робота № 11</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_12.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Лабораторна робота № 12</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_13.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Лабораторна робота № 13</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lab_14.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Лабораторна робота № 14</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Додатки</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appa.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Інструкція зі встановлення Anaconda Navigator</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appb.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Вступ до мови програмування Python</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Основи Jupyter Notebook</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Список рекомендованої літератури</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Зміст</h2>
   
  <ul>
  <li><a href="#теоретичні-відомості" id="toc-теоретичні-відомості" class="nav-link active" data-scroll-target="#теоретичні-відомості"><span class="header-section-number">14.1</span> Теоретичні відомості</a>
  <ul class="collapse">
  <li><a href="#перетворення-часових-рядів-у-графи" id="toc-перетворення-часових-рядів-у-графи" class="nav-link" data-scroll-target="#перетворення-часових-рядів-у-графи"><span class="header-section-number">14.1.1</span> Перетворення часових рядів у графи</a></li>
  <li><a href="#пакет-ts2vg" id="toc-пакет-ts2vg" class="nav-link" data-scroll-target="#пакет-ts2vg"><span class="header-section-number">14.1.2</span> Пакет <code>ts2vg</code></a></li>
  </ul></li>
  <li><a href="#хід-роботи" id="toc-хід-роботи" class="nav-link" data-scroll-target="#хід-роботи"><span class="header-section-number">14.2</span> Хід роботи</a>
  <ul class="collapse">
  <li><a href="#побудова-графу" id="toc-побудова-графу" class="nav-link" data-scroll-target="#побудова-графу"><span class="header-section-number">14.2.1</span> Побудова графу</a></li>
  <li><a href="#віконна-процедура" id="toc-віконна-процедура" class="nav-link" data-scroll-target="#віконна-процедура"><span class="header-section-number">14.2.2</span> Віконна процедура</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.dev/Butman2099/Complex-systems-book/blob/main/lab_14.ipynb" class="toc-action">Редагувати сторінку</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Лабораторна робота № 14</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><strong>Тема.</strong> Графодинамічний аналіз часових рядів</p>
<p><strong>Мета.</strong> Навчитися використовувати елементи теорії графів для отримання спектральних і топологічних мір складності систем, що характеризуються часовими рядами.</p>
<section id="теоретичні-відомості" class="level2" data-number="14.1">
<h2 data-number="14.1" class="anchored" data-anchor-id="теоретичні-відомості"><span class="header-section-number">14.1</span> Теоретичні відомості</h2>
<p>У попередній роботі ми ввели поняття мір складності для найпростіших графів та поширених мережних моделей, порівняли деякі з мір складності. В даній роботі ми продемонструємо сучасні методи перетворення часових рядів, що характеризують складні системи, у мережу з подальшим дослідженням відповідних спектральних і топологічних мір складності. Ми також покажемо, що вказані міри можна співставляти з динамікою вихідного часового ряду і якщо вони є інформативними щодо можливих змін власне ряду, то їх можливо використовувати для побудови індикаторів характерної динаміки складних систем.</p>
<p>Більшість складних систем інформують про свою структурну та динамічну природу, генеруючи послідовність певних характеристик, що можна представити часовими рядами. Останніми роками розроблено цікаві алгоритми перетворення часових рядів у мережу, що дозволяє розширити діапазон відомих характеристик часових рядів навіть до мережевих. Останнім часом було запропоновано декілька підходів до перетворення часових послідовностей у складні мережеподібні відображення. Ці методи можна умовно розділити на три класи <span class="citation" data-cites="DONNER2011">&nbsp;[<a href="references.html#ref-DONNER2011" role="doc-biblioref">1</a>]</span>. Перший базується на вивченні “видимості” послідовних значень часового ряду і називається графом видимості (Visibility Graph, VG) <span class="citation" data-cites="DONNER2011 vg_lacasa">&nbsp;[<a href="references.html#ref-DONNER2011" role="doc-biblioref">1</a>,<a href="references.html#ref-vg_lacasa" role="doc-biblioref">2</a>]</span>.</p>
<p>Другий аналізує взаємне наближення різних відрізків часової послідовності і використовує техніку рекурентного аналізу <span class="citation" data-cites="DONNER2011">&nbsp;[<a href="references.html#ref-DONNER2011" role="doc-biblioref">1</a>]</span>. Рекурентна діаграма відображає існуючу повторюваність фазових траєкторій у вигляді бінарної матриці, елементами якої є одиниці або нулі, залежно від того, чи є близькими (рекурентними) із заданою точністю чи ні обрані точки фазового простору динамічної системи. Рекурентна діаграма легко трансформується в матрицю суміжності, за якою розраховуються спектральні та топологічні характеристики графу <span class="citation" data-cites="review_econophys">&nbsp;[<a href="references.html#ref-review_econophys" role="doc-biblioref">3</a>]</span>.</p>
<p>Нарешті, якщо в основу формування зв’язків елементів графа покласти кореляційні відношення між ними, то отримаємо кореляційний граф <span class="citation" data-cites="DONNER2011">&nbsp;[<a href="references.html#ref-DONNER2011" role="doc-biblioref">1</a>]</span>. Для побудови та аналізу властивостей кореляційного графа необхідно сформувати з кореляційної матриці матрицю суміжності. Для цього необхідно ввести величину, яка для кореляційного поля буде слугувати відстанню між корельованими агентами. Така відстань може бути представлена як <span class="math inline">\(d_{ij}=\sqrt{2(1-C_{ij})}\)</span>, де <span class="math inline">\(C_{ij}\)</span> — це коефіцієнт кореляції між двома активами. Так, якщо коефіцієнт кореляції між двома активами значний, то відстань між ними невелика, і, починаючи з певного критичного значення <span class="math inline">\(d_{cr}\)</span>, активи можна вважати зв’язаними на графіку. Для матриці суміжності це означає, що вони є суміжними на графі. В іншому випадку активи не є суміжними. У цьому випадку умова зв’язності графа є обов’язковою умовою.</p>
<p>Основною метою таких методів є точне відтворення інформації, що зберігається в часових рядах, в альтернативній математичній структурі, щоб згодом можна було використовувати потужні інструменти теорії графів для характеристики часових рядів з іншої точки зору з метою подолання розриву між нелінійним аналізом часових рядів, динамічних систем і теорією графів.</p>
<p>У даній роботі розглянемо лише алгоритм графа видимості.</p>
<section id="перетворення-часових-рядів-у-графи" class="level3" data-number="14.1.1">
<h3 data-number="14.1.1" class="anchored" data-anchor-id="перетворення-часових-рядів-у-графи"><span class="header-section-number">14.1.1</span> Перетворення часових рядів у графи</h3>
<p>Алгоритм класичного графа видимості був представлений у роботі <span class="citation" data-cites="vg_lacasa">&nbsp;[<a href="references.html#ref-vg_lacasa" role="doc-biblioref">2</a>]</span>. Для його використання спочатку треба взяти часовий ряд <span class="math inline">\(Y(t)=\left\{ y_1, y_2,...,y_n \right\}\)</span> довжини <span class="math inline">\(n\)</span>. Кожну точку даних часового ряду можна розглядати як вершину асоціативної мережі, а ребро буде поєднувати дві вершини, якщо дві відповідні точки часового ряду можуть “бачити” одна одну (<a href="#fig-vg-hvg">Рис.&nbsp;<span>14.1</span></a>). Формально, два значення <span class="math inline">\(y_a\)</span> ряду (у момент часу <span class="math inline">\(t_a\)</span> ) та <span class="math inline">\(y_b\)</span> (у момент часу <span class="math inline">\(t_b\)</span>) зв’язані, якщо для будь-якого іншого значення (<span class="math inline">\(y_c, t_c\)</span>), яке знаходиться між ними (<span class="math inline">\(t_a &lt; t_c &lt; t_b\)</span>), буде виконуватись наступна умова:</p>
<p><span id="eq-14-1"><span class="math display">\[
y_c &lt; y_a + (y_b - y_a)\frac{t_c - t_a}{t_b - t_a}.
\tag{14.1}\]</span></span></p>
<p>Альтернативним (і набагато простішим) алгоритмом є горизонтальний граф видимості (Horizontal Visibility Graph, HVG) <span class="citation" data-cites="PhysRevE.80.046103">&nbsp;[<a href="references.html#ref-PhysRevE.80.046103" role="doc-biblioref">4</a>]</span>, в якому можна встановити зв’язок між двома точками <span class="math inline">\(y_a\)</span> і <span class="math inline">\(y_b\)</span>, якщо можна провести горизонтальну лінію в часовому ряді, що з’єднує їх, яка при цьому не перетинатиме жодне проміжне значення <span class="math inline">\(y_c\)</span>, за наступним геометричним критерієм:</p>
<p><span id="eq-14-2"><span class="math display">\[
y_c &lt; \min{(y_a, y_b)}, \,\, \text{для} \,\, t_a &lt; t_c &lt; t_b.
\tag{14.2}\]</span></span></p>
<div id="fig-vg-hvg" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="Images\lab_14\vg-hvg.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Рис.&nbsp;14.1: Ілюстрація побудови класичного графа видимості (червона лінія) та горизонтального графа видимості (зелена лінія) <span class="citation" data-cites="PhysRevE.94.052309">&nbsp;[<a href="references.html#ref-PhysRevE.94.052309" role="doc-biblioref">5</a>]</span></figcaption>
</figure>
</div>
</section>
<section id="пакет-ts2vg" class="level3" data-number="14.1.2">
<h3 data-number="14.1.2" class="anchored" data-anchor-id="пакет-ts2vg"><span class="header-section-number">14.1.2</span> Пакет <code>ts2vg</code></h3>
<p>Для подальшої побудови класичного VG або його горизонтального аналогу, ми будемо використовувати бібліотеку <a href="https://cbergillos.com/ts2vg/index.html#id3"><code>ts2vg</code></a>. Пакет <code>ts2vg</code> надає високопродуктивну реалізацію алгоритму для побудови графів видимості з даних часових рядів, вперше представленого Лукасом Лакасою та ін. у 2008 році <span class="citation" data-cites="vg_lacasa">&nbsp;[<a href="references.html#ref-vg_lacasa" role="doc-biblioref">2</a>]</span>.</p>
<p>Графи видимості та деякі з їхніх властивостей (наприклад, степеневі розподіли) обчислюються швидко та ефективно навіть для часових рядів з мільйонами спостережень. Для обчислення графів використовується ефективний алгоритм “розділяй і володарюй”, коли це можливо <span class="citation" data-cites="10.1063/1.4927835">&nbsp;[<a href="references.html#ref-10.1063/1.4927835" role="doc-biblioref">6</a>]</span>.</p>
<section id="встановлення" class="level4" data-number="14.1.2.1">
<h4 data-number="14.1.2.1" class="anchored" data-anchor-id="встановлення"><span class="header-section-number">14.1.2.1</span> Встановлення</h4>
<p>Остання випущена версія <code>ts2vg</code> доступна на <a href="https://pypi.org/project/ts2vg">PyPI</a> і може бути легко встановлена шляхом запуску наступної команди:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install ts2vg</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="підтримувані-типи-графів" class="level4" data-number="14.1.2.2">
<h4 data-number="14.1.2.2" class="anchored" data-anchor-id="підтримувані-типи-графів"><span class="header-section-number">14.1.2.2</span> Підтримувані типи графів</h4>
<section id="основні-типи" class="level5" data-number="14.1.2.2.1">
<h5 data-number="14.1.2.2.1" class="anchored" data-anchor-id="основні-типи"><span class="header-section-number">14.1.2.2.1</span> Основні типи</h5>
<ul>
<li>Класичний граф видимості <span class="citation" data-cites="vg_lacasa">&nbsp;[<a href="references.html#ref-vg_lacasa" role="doc-biblioref">2</a>]</span> (<code>ts2vg.NaturalVG</code>)</li>
<li>Горизонтальний граф видимості <span class="citation" data-cites="PhysRevE.80.046103">&nbsp;[<a href="references.html#ref-PhysRevE.80.046103" role="doc-biblioref">4</a>]</span> (<code>ts2vg.HorizontalVG</code>)</li>
</ul>
</section>
<section id="доступні-варіації" class="level5" data-number="14.1.2.2.2">
<h5 data-number="14.1.2.2.2" class="anchored" data-anchor-id="доступні-варіації"><span class="header-section-number">14.1.2.2.2</span> Доступні варіації</h5>
<ul>
<li>Зважений граф видимості (через параметр <code>weighted</code>)</li>
<li>Направлений граф видимості (через параметр <code>directed</code>)</li>
<li>Параметричний граф видимості <span class="citation" data-cites="BEZSUDNOV201453">&nbsp;[<a href="references.html#ref-BEZSUDNOV201453" role="doc-biblioref">7</a>]</span> (через параметри <code>min_weight</code> та <code>max_weight</code>)</li>
<li>Граф обмеженої проникної видимості <span class="citation" data-cites="2012-3-030506 10.1063/5.0048243">&nbsp;[<a href="references.html#ref-2012-3-030506" role="doc-biblioref">8</a>,<a href="references.html#ref-10.1063/5.0048243" role="doc-biblioref">9</a>]</span> (через параметр <code>penetrable_limit</code>)</li>
</ul>
<p>Зверніть увагу, що кілька варіантів графів можна комбінувати і використовувати одночасно. Із більш детальною документацією можна ознайомитись на сайті бібліотеки <a href="https://carlosbergillos.github.io/ts2vg/"><code>ts2vg</code></a>.</p>
</section>
<section id="сумісність-з-іншими-бібліотеками" class="level5" data-number="14.1.2.2.3">
<h5 data-number="14.1.2.2.3" class="anchored" data-anchor-id="сумісність-з-іншими-бібліотеками"><span class="header-section-number">14.1.2.2.3</span> Сумісність з іншими бібліотеками</h5>
<p>Отримані графи можуть бути легко перетворені в графові об’єкти з інших поширених графових бібліотек Python, таких як <code>igraph</code>, <code>NetworkX</code> та <code>SNAP</code>, для подальшого аналізу.</p>
<p>Для цього передбачені наступні методи:</p>
<ul>
<li><code>as_igraph()</code></li>
<li><code>as_network()</code></li>
<li><code>as_snap()</code></li>
</ul>
</section>
</section>
</section>
</section>
<section id="хід-роботи" class="level2" data-number="14.2">
<h2 data-number="14.2" class="anchored" data-anchor-id="хід-роботи"><span class="header-section-number">14.2</span> Хід роботи</h2>
<p>Спочатку імпортуємо необхідні модулі для подальшої роботи:</p>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.dates <span class="im">as</span> mdates</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> neurokit2 <span class="im">as</span> nk</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yfinance <span class="im">as</span> yf</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> networkx <span class="im">as</span> nx</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scienceplots</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn <span class="im">import</span> preprocessing</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> tqdm <span class="im">import</span> tqdm</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> ts2vg <span class="im">import</span> NaturalVG, HorizontalVG</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.spatial <span class="im">import</span> distance</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>matplotlib inline</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>І виконаємо налаштування рисунків для виведення:</p>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>plt.style.use([<span class="st">'science'</span>, <span class="st">'notebook'</span>, <span class="st">'grid'</span>]) <span class="co"># стиль, що використовуватиметься</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>                                               <span class="co"># для виведення рисунків</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>params <span class="op">=</span> {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'figure.figsize'</span>: (<span class="dv">8</span>, <span class="dv">6</span>),         <span class="co"># встановлюємо ширину та висоту рисунків за замовчуванням</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">'font.size'</span>: <span class="dv">22</span>,                  <span class="co"># розмір фонтів рисунку</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">'lines.linewidth'</span>: <span class="dv">2</span>,             <span class="co"># товщина ліній</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">'axes.titlesize'</span>: <span class="st">'small'</span>,        <span class="co"># розмір титулки над рисунком</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"font.family"</span>: <span class="st">"sans-serif"</span>,      <span class="co"># сімейство стилів підписів </span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"font.serif"</span>: [<span class="st">"Times"</span>],          <span class="co"># стиль підпису</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">'savefig.dpi'</span>: <span class="dv">300</span>                <span class="co"># якість збережених зображень</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>plt.rcParams.update(params)           <span class="co"># оновлення стилю згідно налаштувань</span></span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Розглянемо можливість використання графодинамічний показників у якості індикаторів або індикаторів-передвісників кризових явищ. Для прикладу завантажимо часовий ряд криптовалютного індексу Біткоїна за весь часовий період, що надається веб-ресурсом <code>yfinance</code>:</p>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>symbol <span class="op">=</span> <span class="st">'BTC-USD'</span>          <span class="co"># Символ індексу</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> yf.download(symbol)  <span class="co"># вивантажуємо дані</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>time_ser <span class="op">=</span> data[<span class="st">'Adj Close'</span>].copy()     <span class="co"># зберігаємо саме ціни закриття</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>date_in_num <span class="op">=</span> mdates.date2num(time_ser.index)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>xlabel <span class="op">=</span> <span class="st">'time, days'</span>    <span class="co"># підпис по вісі Ох </span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>ylabel <span class="op">=</span> symbol          <span class="co"># підпис по вісі Оу</span></span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[*********************100%%**********************]  1 of 1 completed</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Увага
</div>
</div>
<div class="callout-body-container callout-body">
<p>Виконайте цей блок, якщо хочете зчитати дані не з Yahoo! Finance, а із власного файлу. Зрозуміло, що й аналіз результатів, і висновки залежать від того з яким рядом ми працюємо.</p>
</div>
</div>
<hr>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>symbol <span class="op">=</span> <span class="st">'sMpa11'</span>                  <span class="co"># Символ індексу</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>path <span class="op">=</span> <span class="st">"databases\sMpa11.txt"</span>      <span class="co"># шлях по якому здійснюється зчитування файлу</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>data <span class="op">=</span> pd.read_csv(path,           <span class="co"># зчитування даних </span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>                   names<span class="op">=</span>[symbol])</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>time_ser <span class="op">=</span> data[symbol].copy()     <span class="co"># копіюємо значення кривої </span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>                                   <span class="co"># "напруга-видовження" до окремої змінної</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>date_in_num <span class="op">=</span> mdates.date2num(time_ser.index)</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>xlabel <span class="op">=</span> <span class="vs">r'$\varepsilon$'</span>          <span class="co"># підпис по вісі Ох </span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>ylabel <span class="op">=</span> symbol                    <span class="co"># підпис по вісі Оу</span></span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
<p>Виведемо досліджуваний ряд:</p>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()                   <span class="co"># Створюємо порожній графік</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>ax.plot(time_ser.index, time_ser.values)   <span class="co"># Додаємо дані до графіку</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>ax.legend([symbol])                        <span class="co"># Додаємо легенду</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>ax.set_xlabel(xlabel)                      <span class="co"># Встановимо підпис по вісі Ох</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>ax.set_ylabel(ylabel)                      <span class="co"># Встановимо підпис по вісі Oy</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>plt.xticks(rotation<span class="op">=</span><span class="dv">45</span>)                    <span class="co"># оберт позначок по осі Ох на 45 градусів</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="ss">f'</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">.jpg'</span>)               <span class="co"># Зберігаємо графік </span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>plt.show()<span class="op">;</span>                                <span class="co"># Виводимо графік</span></span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-dji-init" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="lab_14_files/figure-html/fig-dji-init-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Рис.&nbsp;14.2: Динаміка щоденних змін індексу Біткоїна</figcaption>
</figure>
</div>
</div>
</div>
<p>Як і до цього, визначимо функцію для перетворення ряду (його стандартизації або знаходження прибутковостей). Для цього оголосимо функцію <code>transformation()</code>, що прийматиме на вхід часовий сигнал, тип ряду, і повертатиме його перетворення. Як показували попередні дослідження авторів, вихідне представлення часового ряду надає найбільш інформативне представлення для побудови графу. Тим не менш, ми допускаємо, що, наприклад, прибутковості фізичного сигналу можуть мати краще графове представлення, тому і визначаємо цю функцію в даній роботі.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> transformation(signal, ret_type):</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    for_graph <span class="op">=</span> signal.copy()</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> ret_type <span class="op">==</span> <span class="dv">1</span>:       <span class="co"># Зважаючи на вид ряду, виконуємо</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>                            <span class="co"># необхідні перетворення</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">pass</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> ret_type <span class="op">==</span> <span class="dv">2</span>:</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">=</span> for_graph.diff()</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> ret_type <span class="op">==</span> <span class="dv">3</span>:</span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">=</span> for_graph.pct_change()</span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> ret_type <span class="op">==</span> <span class="dv">4</span>:</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">=</span> for_graph.pct_change()</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">-=</span> for_graph.mean()</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">/=</span> for_graph.std()</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> ret_type <span class="op">==</span> <span class="dv">5</span>: </span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">=</span> for_graph.pct_change()</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">-=</span> for_graph.mean()</span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">/=</span> for_graph.std()</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">=</span> for_graph.<span class="bu">abs</span>()</span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">elif</span> ret_type <span class="op">==</span> <span class="dv">6</span>:</span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">-=</span> for_graph.mean()</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>        for_graph <span class="op">/=</span> for_graph.std()</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a>    for_graph <span class="op">=</span> for_graph.dropna().values</span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> for_graph</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Повертаємо той самий вихідний сигнал.</p>
<p>Далі задаємо параметри досліджуваного графу. Для подальших розрахунків ми будемо використовувати одне й те саме значення часового вікна, кроку й типу ряду.</p>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>signal <span class="op">=</span> time_ser.copy()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>ret_type <span class="op">=</span> <span class="dv">1</span>            <span class="co"># вид ряду: 1 - вихідний, </span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># 2 - детрендований (різниця між теп. значенням та попереднім)</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># 3 - прибутковості звичайні, </span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># 4 - стандартизовані прибутковості, </span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># 5 - абсолютні значення (волатильності)</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>                        <span class="co"># 6 - стандартизований ряд</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>for_graph <span class="op">=</span> transformation(signal, ret_type) <span class="co"># перетворення сигналу</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>window <span class="op">=</span> <span class="dv">250</span>            <span class="co"># розмір вікна</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>tstep <span class="op">=</span> <span class="dv">1</span>               <span class="co"># крок вікна</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>graph_type <span class="op">=</span> <span class="st">'classic'</span>  <span class="co"># тип графу: classic, horizontal</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>length <span class="op">=</span> <span class="bu">len</span>(time_ser)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="побудова-графу" class="level3" data-number="14.2.1">
<h3 data-number="14.2.1" class="anchored" data-anchor-id="побудова-графу"><span class="header-section-number">14.2.1</span> Побудова графу</h3>
<p>Оскільки побудова графу для всього часового ряду може зайняти досить великий проміжок часу, ми будемо будувати граф видимості лише для його фрагменту. Для цього визначимо параметри <code>index_begin</code> та <code>index_end</code>, які будуть вказувати на початок відліку побудови графу та кінець. Побудову проводимо для класичного графу видимості.</p>
<div class="cell" data-scrolled="true" data-execution_count="24">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>index_begin <span class="op">=</span> <span class="dv">1700</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>index_end <span class="op">=</span> <span class="dv">2800</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>date <span class="op">=</span> date_in_num[index_begin:index_end]</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(for_graph[index_begin:index_end], xs<span class="op">=</span>date)</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    pos1 <span class="op">=</span> g.node_positions()</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(for_graph[index_begin:index_end], xs<span class="op">=</span>date)</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    pos1 <span class="op">=</span> g.node_positions()</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>graph_plot_options <span class="op">=</span> {</span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">'with_labels'</span>: <span class="va">False</span>,</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">'node_size'</span>: <span class="dv">0</span>,</span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">'node_color'</span>: [(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>)],</span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">'edge_color'</span>: [(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="fl">0.15</span>)],</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">15</span>, <span class="dv">8</span>))</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx(nxg, ax<span class="op">=</span>ax[<span class="dv">0</span>], pos<span class="op">=</span>pos1, <span class="op">**</span>graph_plot_options)</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].tick_params(bottom<span class="op">=</span><span class="va">True</span>, labelbottom<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].plot(time_ser.index[index_begin:index_end], for_graph[index_begin:index_end], label<span class="op">=</span><span class="vs">fr"</span><span class="sc">{</span>ylabel<span class="sc">}</span><span class="vs">"</span>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_title(<span class="ss">f'Зв</span><span class="ch">\'</span><span class="ss">язки видимості для </span><span class="sc">{</span>ylabel<span class="sc">}</span><span class="ss">'</span>, pad<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_xlabel(xlabel)</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].set_ylabel(<span class="ss">f"</span><span class="sc">{</span>ylabel<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].legend(loc<span class="op">=</span><span class="st">'upper right'</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">0</span>].tick_params(axis<span class="op">=</span><span class="st">'x'</span>, labelrotation<span class="op">=</span><span class="dv">45</span>)</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>ax[<span class="dv">1</span>].set_title(<span class="ss">f'Графове представлення для </span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">'</span>, pad<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co"># визначаємо позицію вузлів на графі</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>pos2 <span class="op">=</span> nx.spring_layout(nxg, k<span class="op">=</span><span class="fl">0.15</span>, iterations<span class="op">=</span><span class="dv">100</span>)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co"># розраховуємо степеневу центральність</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>degCent <span class="op">=</span> nx.degree_centrality(nxg)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co"># створити список розмірів вершин на основі степеневої центральності</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>node_sizes <span class="op">=</span> [v<span class="op">*</span><span class="dv">100</span> <span class="cf">for</span> v <span class="kw">in</span> degCent.values()]</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co"># кольори вузлів на основі їх степеневої центральності</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>node_colors <span class="op">=</span> [v <span class="cf">for</span> v <span class="kw">in</span> degCent.values()]</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co"># будуємо граф</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>nx.draw_networkx(nxg, ax<span class="op">=</span>ax[<span class="dv">1</span>], pos<span class="op">=</span>pos2,</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>                node_size<span class="op">=</span>node_sizes,  </span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>                node_color<span class="op">=</span>node_colors,</span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>                with_labels<span class="op">=</span><span class="va">False</span>,</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>                cmap<span class="op">=</span>plt.get_cmap(<span class="st">'plasma'</span>))</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="co"># присвоюємо мінімальне та максимальне значення </span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="co"># степеневої центральності для побудови теплової шкали</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a>vmin <span class="op">=</span> np.asarray(<span class="bu">list</span>(degCent.values())).<span class="bu">min</span>()</span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a>vmax <span class="op">=</span> np.asarray(<span class="bu">list</span>(degCent.values())).<span class="bu">max</span>()</span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a>sm <span class="op">=</span> plt.cm.ScalarMappable(cmap<span class="op">=</span>plt.get_cmap(<span class="st">'plasma'</span>), </span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a>                           norm<span class="op">=</span>plt.Normalize(vmin<span class="op">=</span>vmin, vmax<span class="op">=</span>vmax))</span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a>cb <span class="op">=</span> plt.colorbar(sm, ax<span class="op">=</span>ax[<span class="dv">1</span>])</span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a>cb.set_label(<span class="st">'Степенева центральність'</span>)</span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a>plt.savefig(<span class="ss">f"Time_ser_connections_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_idx_beg=</span><span class="sc">{</span>index_begin<span class="sc">}</span><span class="ss">_</span><span class="ch">\</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a><span class="ss">            idx_end=</span><span class="sc">{</span>index_end<span class="sc">}</span><span class="ss">_sertype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_network_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">.jpg"</span>, bbox_inches<span class="op">=</span><span class="st">"tight"</span>, dpi<span class="op">=</span><span class="dv">1000</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>Як ми можемо бачити з представленого рисунку, 3 послідовних зростання та спадів у 2021-2022 роках характеризуються доволі високим ступенем видимості в передкризовий період. Також дані піки утворюють орієнтовно 3 кластери із високою степеневою центральністю. Крахові події на криптовалютному ринку можна розглядати як графи переважного приєднання, де, можливо, ключову роль у цих підйомах та спадах можуть відігравати один або декілька “китів” ринку, котрі чинять найбільший вплив на ринок і спрямовують вектор уваги всіх трейдерів у тому чи іншому напрямі.</p>
</section>
<section id="віконна-процедура" class="level3" data-number="14.2.2">
<h3 data-number="14.2.2" class="anchored" data-anchor-id="віконна-процедура"><span class="header-section-number">14.2.2</span> Віконна процедура</h3>
<p>Далі будемо спостерігати за тим, як змінюються графові властивості мережі з плином часу. Для цього будемо використовувати добре знайому для нас процедуру рухомого вікна. У рамках цієї процедури дослідимо графодинаміку як спектральних, так і топологічних показників.</p>
<p>Для побудови парної динаміки конкретного індикатора та досліджуваного ряду визначимо функцію <code>plot_pair</code>:</p>
<div class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_pair(x_values, </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>              y1_values,</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>              y2_values,  </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>              y1_label, </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>              y2_label,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>              x_label, </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>              file_name, clr<span class="op">=</span><span class="st">"magenta"</span>):</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>    ax2 <span class="op">=</span> ax.twinx()</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>    ax2.spines.right.set_position((<span class="st">"axes"</span>, <span class="fl">1.03</span>))</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>    p1, <span class="op">=</span> ax.plot(x_values, </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                  y1_values, </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                  <span class="st">"b-"</span>, label<span class="op">=</span><span class="vs">fr"</span><span class="sc">{</span>y1_label<span class="sc">}</span><span class="vs">"</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>    p2, <span class="op">=</span> ax2.plot(x_values,</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>                   y2_values, </span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>                   color<span class="op">=</span>clr, </span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>                   label<span class="op">=</span>y2_label)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>    ax.set_xlabel(x_label)</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>    ax.set_ylabel(<span class="ss">f"</span><span class="sc">{</span>y1_label<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    ax.yaxis.label.set_color(p1.get_color())</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>    ax2.yaxis.label.set_color(p2.get_color())</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>    tkw <span class="op">=</span> <span class="bu">dict</span>(size<span class="op">=</span><span class="dv">2</span>, width<span class="op">=</span><span class="fl">1.5</span>)</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">'x'</span>, <span class="op">**</span>tkw)</span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>    ax.tick_params(axis<span class="op">=</span><span class="st">'y'</span>, colors<span class="op">=</span>p1.get_color(), <span class="op">**</span>tkw)</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>    ax2.tick_params(axis<span class="op">=</span><span class="st">'y'</span>, colors<span class="op">=</span>p2.get_color(), <span class="op">**</span>tkw)</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>    ax2.legend(handles<span class="op">=</span>[p1, p2])</span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>    plt.savefig(file_name <span class="op">+</span> <span class="st">".jpg"</span>)</span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a>    plt.show()<span class="op">;</span></span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="спектральні-характеристики" class="level4" data-number="14.2.2.1">
<h4 data-number="14.2.2.1" class="anchored" data-anchor-id="спектральні-характеристики"><span class="header-section-number">14.2.2.1</span> Спектральні характеристики</h4>
<p>Спектральна теорія графів базується на вивченні властивостей графів через власні значення або власні вектори матриці суміжності <span class="math inline">\(A\)</span> або матриці Лапласа <span class="math inline">\(L\)</span> <span class="citation" data-cites="Chung:1997">&nbsp;[<a href="references.html#ref-Chung:1997" role="doc-biblioref">10</a>]</span>.</p>
<p>Стандартна матриця Лапласа для графу <span class="math inline">\(G\)</span> визначається як</p>
<p><span id="eq-14-3"><span class="math display">\[
L = D - A,
\tag{14.3}\]</span></span></p>
<p>де <span class="math inline">\(D\)</span> — діагональна матриця <span class="math inline">\(G\)</span>, де <span class="math inline">\(i\)</span>-ий діагональний елемент є степенем вершини <span class="math inline">\(i\)</span> в <span class="math inline">\(G\)</span> <span class="citation" data-cites="spec_graph_theory">&nbsp;[<a href="references.html#ref-spec_graph_theory" role="doc-biblioref">11</a>]</span>, а <span class="math inline">\(A\)</span> — матриця суміжності <span class="math inline">\(G\)</span>. У цій роботі ми представляємо спектральні характеристики для нормованої матриці Лапласа <span class="citation" data-cites="norm_lapl">&nbsp;[<a href="references.html#ref-norm_lapl" role="doc-biblioref">12</a>]</span>, яка визначається як</p>
<p><span id="eq-14-4"><span class="math display">\[
\hat{L} = D^{-1/2}LD^{-1/2}.
\tag{14.4}\]</span></span></p>
<p>Якщо <span class="math inline">\(\lambda\)</span> — власне значення <span class="math inline">\(\hat{L}\)</span>, тоді <span class="math inline">\(\lambda \in [0, 2]\)</span> <span class="citation" data-cites="Chung:1997">&nbsp;[<a href="references.html#ref-Chung:1997" role="doc-biblioref">10</a>]</span>; тобто, нормалізуючи матрицю Лапласа, ми нормалізуємо власні значення.</p>
<div class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>AlgebraicCon <span class="op">=</span> []</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>GraphEnergy <span class="op">=</span> []</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>SpecMoment_3 <span class="op">=</span> []</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>SpecRadius <span class="op">=</span> []</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>SpecGap <span class="op">=</span> []</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>NaturalConnectivity <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># спектр власних значень матриці суміжності</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>    adj_spectrum <span class="op">=</span> nx.adjacency_spectrum(nxg).real</span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># сортуємо власні значення в порядку зростання</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    sorted_adj_spectrum <span class="op">=</span> np.sort(adj_spectrum)</span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розраховуємо алгебраїчну зв'язність</span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>    alg_con <span class="op">=</span> nx.algebraic_connectivity(nxg, normalized<span class="op">=</span><span class="va">True</span>, method<span class="op">=</span><span class="st">'tracemin_lu'</span>) </span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розраховуємо енергію графа</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>    graph_en <span class="op">=</span> np.<span class="bu">sum</span>(np.<span class="bu">abs</span>(adj_spectrum))</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розраховуємо спектральний розрив</span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a>    spec_gap <span class="op">=</span> sorted_adj_spectrum[<span class="op">-</span><span class="dv">1</span>] <span class="op">-</span> sorted_adj_spectrum[<span class="op">-</span><span class="dv">2</span>]</span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розраховуємо спектральний радіус</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a>    spec_rad <span class="op">=</span> np.<span class="bu">max</span>(np.<span class="bu">abs</span>(adj_spectrum))</span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розраховуємо спектральний момент</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a>    spec_mom_3 <span class="op">=</span> np.mean(adj_spectrum <span class="op">**</span> <span class="dv">3</span>)</span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розраховуємо природню зв'язність</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a>    nat_con <span class="op">=</span> np.log(np.mean(np.exp(adj_spectrum)))</span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a>    AlgebraicCon.append(alg_con)</span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a>    GraphEnergy.append(graph_en)</span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a>    SpecRadius.append(spec_rad)</span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a>    SpecGap.append(spec_gap)</span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a>    SpecMoment_3.append(spec_mom_3)</span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a>    NaturalConnectivity.append(nat_con)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [02:54&lt;00:00, 18.21it/s]</code></pre>
</div>
</div>
<p>Зберігаємо абсолютні значення у текстовому документі. Також готуємо мітки для рисунків та назви збережених:</p>
<div class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'algebraic_conn'</span>, <span class="st">'graph_energy'</span>, <span class="st">'spectral_radius'</span>, </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">'spectral_grap'</span>, <span class="st">'spectral_moment_3'</span>, <span class="st">'natural_connectivity'</span>]</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [AlgebraicCon, GraphEnergy, SpecRadius, </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>              SpecGap, SpecMoment_3, NaturalConnectivity]</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$\lambda_2$'</span>, <span class="vs">r'$E$'</span>, <span class="vs">r'$R$'</span>, <span class="vs">r'$\delta$'</span>, <span class="vs">r'$m_3$'</span>, <span class="vs">r'$N_c$'</span>]</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="алгебраїчна-звязність" class="level5" data-number="14.2.2.1.1">
<h5 data-number="14.2.2.1.1" class="anchored" data-anchor-id="алгебраїчна-звязність"><span class="header-section-number">14.2.2.1.1</span> Алгебраїчна зв’язність</h5>
<p>Вивчаючи власні значення матриці Лапласа, однією з основних характеристик, яку ми можемо отримати, є <strong>алгебраїчна зв’язність</strong> <span class="math inline">\(\lambda_2\)</span> графа, яка відповідає другому найменшому власному значенню матриці Лапласа. Цей показник відображає кількість роз’єднаних компонент. Для розв’язного графа графа <span class="math inline">\(\lambda_2\)</span> буде дорівнювати нулю. Отже, з вищою щільністю зв’язків ми очікуємо, що <span class="math inline">\(\lambda_2\)</span> буде більшим. Використовуючи його, ми могли б сказати, наскільки відмовостійкою є досліджувана система і наскільки синхронізованими залишаються її вузли.</p>
<div class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"magenta"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-16-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="енергія-графу" class="level5" data-number="14.2.2.1.2">
<h5 data-number="14.2.2.1.2" class="anchored" data-anchor-id="енергія-графу"><span class="header-section-number">14.2.2.1.2</span> Енергія графу</h5>
<p>З власних значень матриці суміжності <span class="math inline">\(A\)</span> з <span class="math inline">\(G\)</span> можна визначити таку міру, як <strong>енергія графу</strong> <span class="math inline">\(E(G)\)</span> <span class="citation" data-cites="PhysRevE.85.016117 gutman1978energy">&nbsp;[<a href="references.html#ref-PhysRevE.85.016117" role="doc-biblioref">13</a>,<a href="references.html#ref-gutman1978energy" role="doc-biblioref">14</a>]</span>, яка обчислюється як</p>
<p><span id="eq-14-5"><span class="math display">\[
E = E(G) = \sum_{i=1}^{N}\left| \lambda_i \right|.
\tag{14.5}\]</span></span></p>
<p>Подібно до <span class="math inline">\(\lambda_2\)</span>, ми маємо повністю роз’єднаний граф, коли <span class="math inline">\(E(G)=0\)</span>. Для кожного <span class="math inline">\(\lambda_i &gt; 0\)</span> існує багато ребер <span class="math inline">\(e_{ij}\)</span>, які визначають високу та ефективну зв’язність <span class="math inline">\(G\)</span>.</p>
<div class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">1</span>], </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">1</span>],</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">1</span>],</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"crimson"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-17-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="cпектральний-радіус" class="level5" data-number="14.2.2.1.3">
<h5 data-number="14.2.2.1.3" class="anchored" data-anchor-id="cпектральний-радіус"><span class="header-section-number">14.2.2.1.3</span> Cпектральний радіус</h5>
<p>Крім наведених вище мір, можна визначити такі міри, як <strong>спектральний радіус</strong>, яка є найбільшим абсолютним власним значенням матриці <span class="math inline">\(A\)</span>:</p>
<p><span id="eq-14-6"><span class="math display">\[
R = R(G) = \max_{1\leq i \leq N}\left| \lambda_i \right|.
\tag{14.6}\]</span></span></p>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">2</span>], </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">2</span>],</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">2</span>],</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"orange"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="cпектральний-розрив" class="level5" data-number="14.2.2.1.4">
<h5 data-number="14.2.2.1.4" class="anchored" data-anchor-id="cпектральний-розрив"><span class="header-section-number">14.2.2.1.4</span> Cпектральний розрив</h5>
<p>Проранжувавши власні значення матриці суміжності <span class="math inline">\(G\)</span> у неспадаючому порядку, тобто <span class="math inline">\(\lambda_1 \leq \lambda_2 \leq ... \leq \lambda_n\)</span>, ми можемо визначити таку міру, як <strong>спектральний розрив</strong>:</p>
<p><span id="eq-14-7"><span class="math display">\[
\delta = \delta(G) = \lambda_{n} - \lambda_{n-1}
\tag{14.7}\]</span></span></p>
<p>для якого <span class="math inline">\(\lambda_n\)</span> — перше найбільше власне значення <span class="math inline">\(\hat{L}\)</span>, а <span class="math inline">\(\lambda_{n-1}\)</span> друге найбільше власне значення. Спектральний розрив показує швидкість синхронізації в досліджуваній мережі. Чим він більший, тим більш взаємопов’язаними є вершини і тим складнішим є граф.</p>
<div class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">3</span>], </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">3</span>],</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">3</span>],</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"darkgreen"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-19-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="cпектральний-момент" class="level5" data-number="14.2.2.1.5">
<h5 data-number="14.2.2.1.5" class="anchored" data-anchor-id="cпектральний-момент"><span class="header-section-number">14.2.2.1.5</span> Cпектральний момент</h5>
<p>Спектральною мірою складності, яку ми також хотіли б представити є <strong><span class="math inline">\(k\)</span>-й спектральний момент</strong>. Для невід’ємного цілого числа <span class="math inline">\(k\)</span>, <span class="math inline">\(k\)</span>-й спектральний момент суміжності спектра суміжності визначається як</p>
<p><span id="eq-14-8"><span class="math display">\[
m_k = m_k(G) = \sum_{i=1}^{N}\lambda_{i}^{k},
\tag{14.8}\]</span></span></p>
<p>де <span class="math inline">\(m_k\)</span> дорівнює кількості замкнутих обходів довжини <span class="math inline">\(k\)</span> <span class="citation" data-cites="cvetkovic1980spectra">&nbsp;[<a href="references.html#ref-cvetkovic1980spectra" role="doc-biblioref">15</a>]</span>. Кількість замкнутих обходів є важливим показником для вимірювання складності системи. Як було показано в роботі Ву та ін. <span class="citation" data-cites="5740372">&nbsp;[<a href="references.html#ref-5740372" role="doc-biblioref">16</a>]</span>, використовуючи кількість замкнутих обходів всієї довжини, ми можемо виміряти складність графа та надлишковість альтернативних найкоротших шляхів. Отже, більші значення <span class="math inline">\(m_k\)</span> відповідають більшій складності мережі. Для подальших обчислень ми обрали <span class="math inline">\(k=3\)</span>.</p>
<div class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">4</span>], </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">4</span>],</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">4</span>],</span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"chocolate"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-20-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="cпектральна-природна-звязність" class="level5" data-number="14.2.2.1.6">
<h5 data-number="14.2.2.1.6" class="anchored" data-anchor-id="cпектральна-природна-звязність"><span class="header-section-number">14.2.2.1.6</span> Cпектральна природна зв’язність</h5>
<p>Юнь та ін. <span class="citation" data-cites="Wu_Jun_2010">&nbsp;[<a href="references.html#ref-Wu_Jun_2010" role="doc-biblioref">17</a>]</span> запропонували вимірювати “середнє власне значення” спектра суміжності графа <span class="math inline">\(G\)</span>. Було запропоновано називати цей показник <strong>природною зв’язністю</strong> або <strong>природним власним значенням</strong>:</p>
<p><span id="eq-14-9"><span class="math display">\[
N_c = N_c(G) = \ln{\left( \frac{1}{N}\sum_{i=1}^{N}\exp{\lambda_i} \right)}.
\tag{14.9}\]</span></span></p>
<p>Естрада <span class="citation" data-cites="E_Estrada_2006">&nbsp;[<a href="references.html#ref-E_Estrada_2006" role="doc-biblioref">18</a>]</span>, Ву та ін. <span class="citation" data-cites="5740372">&nbsp;[<a href="references.html#ref-5740372" role="doc-biblioref">16</a>]</span> показали, що (<a href="#eq-14-9">Рівняння&nbsp;<span>14.9</span></a>) є чутливою та надійною мірою стійкості мережі.</p>
<div class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">5</span>], </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">5</span>],</span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">5</span>],</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"black"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-21-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="топологічні-центральність-впливовість" class="level4" data-number="14.2.2.2">
<h4 data-number="14.2.2.2" class="anchored" data-anchor-id="топологічні-центральність-впливовість"><span class="header-section-number">14.2.2.2</span> Топологічні (Центральність, впливовість)</h4>
<p>Існує багато способів кількісно оцінити важливість вершини або ребра з точки зору певного мережевого атрибуту, відображаючи таким чином топологію складної мережі.</p>
<div class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>DegreeMax <span class="op">=</span> []</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>GlobalEigenvectorCentrality <span class="op">=</span> []</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>GlobalClosenessCentrality <span class="op">=</span> []</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>GlobalInformationCentrality <span class="op">=</span> []</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>GlobalBetweennessCentrality <span class="op">=</span> []</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>GlobalHarmonicCentrality <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="57">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># максимальний степінь вершини</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>    deg_max <span class="op">=</span> <span class="bu">max</span>(<span class="bu">dict</span>(nxg.degree()).values())</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># середній ступінь впливовості</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>    glob_eigenvector_centrality <span class="op">=</span> np.mean(<span class="bu">list</span>(nx.eigenvector_centrality_numpy(nxg).values()))</span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># середній ступінь близькості</span></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>    glob_closeness_centrality <span class="op">=</span> np.mean(<span class="bu">list</span>(nx.closeness_centrality(nxg).values()))</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>    <span class="co"># середній ступінь інформаційності</span></span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>    glob_information_centrality <span class="op">=</span> np.mean(<span class="bu">list</span>(nx.information_centrality(nxg).values()))</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a>    <span class="co"># максимальний ступінь посередництва</span></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>    glob_betweenness_centrality <span class="op">=</span> np.<span class="bu">max</span>(<span class="bu">list</span>(nx.betweenness_centrality(nxg).values()))</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>    <span class="co"># середній ступінь гармонійності</span></span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a>    glob_harm_centrality <span class="op">=</span> np.mean(<span class="bu">list</span>(nx.harmonic_centrality(nxg).values()))</span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>    DegreeMax.append(deg_max)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a>    GlobalEigenvectorCentrality.append(glob_eigenvector_centrality)</span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>    GlobalClosenessCentrality.append(glob_closeness_centrality)</span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>    GlobalInformationCentrality.append(glob_information_centrality)</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>    GlobalBetweennessCentrality.append(glob_betweenness_centrality)</span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>    GlobalHarmonicCentrality.append(glob_harm_centrality)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [25:33&lt;00:00,  2.07it/s]</code></pre>
</div>
</div>
<p>Зберігаємо абсолютні значення у текстовому документі. Також готуємо мітки для рисунків та назви збережених:</p>
<div class="cell" data-execution_count="68">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'DegreeMax'</span>, <span class="st">'GlobalEigenvectorCentrality'</span>, <span class="st">'GlobalClosenessCentrality'</span>, </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">'GlobalInformationCentrality'</span>, <span class="st">'GlobalBetweennessCentrality'</span>, <span class="st">'GlobalHarmonicCentrality'</span>]</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [DegreeMax, GlobalEigenvectorCentrality, GlobalClosenessCentrality, </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>              GlobalInformationCentrality, GlobalBetweennessCentrality, GlobalHarmonicCentrality]</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$D_</span><span class="sc">{max}</span><span class="vs">$'</span>, <span class="vs">r'$X$'</span>, <span class="vs">r'$C$'</span>, <span class="vs">r'$I$'</span>, <span class="vs">r'$B$'</span>, <span class="vs">r'$GHc$'</span>]</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="максимальний-ступінь-вершини" class="level5" data-number="14.2.2.2.1">
<h5 data-number="14.2.2.2.1" class="anchored" data-anchor-id="максимальний-ступінь-вершини"><span class="header-section-number">14.2.2.2.1</span> Максимальний ступінь вершини</h5>
<p><strong>Ступінь</strong> або <strong>степенева центральність</strong> є концептуально найпростішою метрикою для опису характеристик зв’язку однієї вершини в складній мережі. Вона може бути представлена у вигляді</p>
<p><span id="eq-14-10"><span class="math display">\[
d_i = \sum_{j=1}^{N}A_{ij}
\tag{14.10}\]</span></span></p>
<p>де <span class="math inline">\(d_i\)</span> підраховує кількість <span class="math inline">\(j\)</span>-их ребер, що інцидентні вершині <span class="math inline">\(i\)</span>.</p>
<p>Окрім ступеню конкретної вершини, ми можемо визначити вершину з найбільшою кількістю інцидентних ребер. Кількість таких вершин можемо позначити як <span class="math inline">\(D_{max}\)</span>:</p>
<p><span id="eq-14-11"><span class="math display">\[
D_{max} = \max\left\{ d_i | i=1,...,N \right\}.
\tag{14.11}\]</span></span></p>
<div class="cell" data-execution_count="69">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"magenta"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-25-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="середній-ступінь-впливовості" class="level5" data-number="14.2.2.2.2">
<h5 data-number="14.2.2.2.2" class="anchored" data-anchor-id="середній-ступінь-впливовості"><span class="header-section-number">14.2.2.2.2</span> Середній ступінь впливовості</h5>
<p>Ступінь впливовості обчислює впливовість для вузла шляхом додавання впливовостей його сусідів. Впливовість для вузла <span class="math inline">\(i\)</span> — це <span class="math inline">\(i\)</span>-й елемент лівого власного вектора, пов’язаний з власним значенням <span class="math inline">\(\lambda\)</span> максимального модуля, який є додатним. Такий власний вектор <span class="math inline">\(x\)</span> визначається з точністю до мультиплікативної константи рівнянням</p>
<p><span id="eq-14-12"><span class="math display">\[
\lambda x^{T} = x^{T}A,
\tag{14.12}\]</span></span></p>
<p>де <span class="math inline">\(A\)</span> — матриця суміжності графа <span class="math inline">\(G\)</span>. Наведене вище рівняння еквівалентне наступному:</p>
<p><span id="eq-14-13"><span class="math display">\[
\lambda x_i = \sum_{j \to i}x_j.
\tag{14.13}\]</span></span></p>
<p>Тобто, додавання ступенів впливовості попередників вершини <span class="math inline">\(i\)</span> дає ступінь впливовості <span class="math inline">\(i\)</span>, помножену на <span class="math inline">\(\lambda\)</span>. У випадку неорієнтованих графів <span class="math inline">\(x\)</span> також розв’язує знайоме рівняння з правим власним вектором <span class="math inline">\(Ax =\lambda x\)</span>.</p>
<p>За теоремою Перрона-Фробеніуса <span class="citation" data-cites="doi:10.1137/1.9781611971262">&nbsp;[<a href="references.html#ref-doi:10.1137/1.9781611971262" role="doc-biblioref">19</a>]</span>, якщо <span class="math inline">\(G\)</span> сильно зв’язний, то існує єдиний власний вектор <span class="math inline">\(x\)</span>, і всі його елементи строго додатні.</p>
<p>Якщо <span class="math inline">\(G\)</span> не є сильно зв’язним, то може існувати декілька лівих власних векторів, пов’язаних з <span class="math inline">\(\lambda\)</span>, причому деякі з їх елементів можуть дорівнювати нулю.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Центральність за власним вектором було введено Ландау <span class="citation" data-cites="Schoenberg1969">&nbsp;[<a href="references.html#ref-Schoenberg1969" role="doc-biblioref">20</a>]</span> для шахових турнірів. Пізніше його знову відкрив Вей <span class="citation" data-cites="wei1952algebraic">&nbsp;[<a href="references.html#ref-wei1952algebraic" role="doc-biblioref">21</a>]</span>, а потім популяризував Кендалл <span class="citation" data-cites="760e07d1-fd0d-3ce0-afae-f7ab9cd57766">&nbsp;[<a href="references.html#ref-760e07d1-fd0d-3ce0-afae-f7ab9cd57766" role="doc-biblioref">22</a>]</span> в контексті спортивного рейтингу. Берге ввів загальне визначення для графів, заснованих на соціальних зв’язках <span class="citation" data-cites="berge1958">&nbsp;[<a href="references.html#ref-berge1958" role="doc-biblioref">23</a>]</span>. Бонаcіч <span class="citation" data-cites="35397813-90c1-3806-8d5d-a07b3340ac3d">&nbsp;[<a href="references.html#ref-35397813-90c1-3806-8d5d-a07b3340ac3d" role="doc-biblioref">24</a>]</span> знову ввів центральність власного вектора і зробив її популярною в аналізі зв’язків.</p>
<p>Ця функція обчислює лівий домінуючий власний вектор, що відповідає додаванню впливовості попередників: це звичайний підхід. Щоб додати центральність наступників, спочатку переверніть граф за допомогою <code>G.reverse()</code>.</p>
<p>Ця реалізація використовує <a href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.sparse.linalg.eigs.html#scipy.sparse.linalg.eigs">SciPy sparse eigenvalue solver</a> (ARPACK) для пошуку найбільшої пари власне значення/власний вектор за допомогою ітерацій Арнольді <span class="citation" data-cites="wikipediaArnoldiIteration">&nbsp;[<a href="references.html#ref-wikipediaArnoldiIteration" role="doc-biblioref">25</a>]</span>.</p>
</div>
</div>
<div class="cell" data-execution_count="70">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">1</span>], </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">1</span>],</span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">1</span>],</span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"crimson"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-26-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="середній-ступінь-близькості" class="level5" data-number="14.2.2.2.3">
<h5 data-number="14.2.2.2.3" class="anchored" data-anchor-id="середній-ступінь-близькості"><span class="header-section-number">14.2.2.2.3</span> Середній ступінь близькості</h5>
<p>У мережі відстань <span class="math inline">\(l_{ij}\)</span> між вузлом <span class="math inline">\(i\)</span> та вузлом <span class="math inline">\(j\)</span> позначає кількість ребер, які з’єднують найкоротший шлях між цими двома вузлами. Спираючись на поняття довжини найкоротшого шляху між двома вузлами, ми можемо надати різні властивості, які характеризують зв’язність всієї мережі. Однією з таких мір є центральність або середній ступінь близькості зв’язку між вершиною <span class="math inline">\(i\)</span> та всіма іншими вершинами:</p>
<p><span id="eq-14-14"><span class="math display">\[
c_i = \frac{N-1}{\sum_{j=1}^{N}l_{ij}},
\tag{14.14}\]</span></span></p>
<p>що надають зворотнє середнє по всім найкоротшим шляхам від <span class="math inline">\(i\)</span> до всіх вузлів <span class="math inline">\(j\)</span>.</p>
<p>Середнє арифметичне значення ступеню близькості для кожного <span class="math inline">\(i\)</span>-го вузла дає нам глобальну <strong>глобальний (середній) ступінь близькості</strong>:</p>
<p><span id="eq-14-15"><span class="math display">\[
C = \frac{1}{N}\sum_{i=1}^{N}c_i.
\tag{14.15}\]</span></span></p>
<div class="cell" data-execution_count="71">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">2</span>], </span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">2</span>],</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">2</span>],</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"orange"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-27-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="середній-ступінь-інформаційності" class="level5" data-number="14.2.2.2.4">
<h5 data-number="14.2.2.2.4" class="anchored" data-anchor-id="середній-ступінь-інформаційності"><span class="header-section-number">14.2.2.2.4</span> Середній ступінь інформаційності</h5>
<p>Для визначення центральності будь-якого вузла <span class="math inline">\(i\)</span> пропонується спочатку визначити його інформаційну зв’язність з іншими вузлами, тобто <span class="math inline">\(\left\{I_{ij} | j=1,..., N \right\}\)</span>. Середнє гармонійне значення інформації, що стосується шляху від вузла <span class="math inline">\(i\)</span> до інших вузлів, буде використовуватися для визначення <strong>ступеню інформаційності</strong> вузла <span class="math inline">\(i\)</span>. Зокрема, якщо <span class="math inline">\(I_i\)</span> пов’язано з центральністю або інформаційністю вузла <span class="math inline">\(i\)</span>, то</p>
<p><span id="eq-14-16"><span class="math display">\[
\hat{I_i} = \left( \frac{1}{N}\sum_{j=1}^{N}\frac{1}{I_{ij}} \right)^{-1}.
\tag{14.16}\]</span></span></p>
<p>Згідно зі Стівенсоном та Зеленом <span class="citation" data-cites="STEPHENSON19891">&nbsp;[<a href="references.html#ref-STEPHENSON19891" role="doc-biblioref">26</a>]</span>, ступінь інформаційності можна обчислити шляхом інвертування простої матриці. Перш за все, ми визначаємо <span class="math inline">\(N \times N\)</span> матрицю <span class="math inline">\(B=\left\{{b_{ij}} \right\}\)</span>, де</p>
<p><span id="eq-14-17"><span class="math display">\[
b_{ij} = \begin{cases}
        0 &amp; \text{якщо} \,\, i \,\, та \,\, j \,\, суміжні,\\
        1 &amp; \text{інакше},
    \end{cases}
\tag{14.17}\]</span></span></p>
<p>і <span class="math inline">\(b_{ii}=1+d_i\)</span>, де <span class="math inline">\(d_i\)</span> ступінь вершини <span class="math inline">\(i\)</span>.</p>
<p>Далі, визначивши матрицю <span class="math inline">\(C = \left\{ c_{ij} \right\} = B^{-1}\)</span>, ми можемо розрахувати <span class="math inline">\(I_{ij}\)</span> згідно рівняння нижче:</p>
<p><span id="eq-14-18"><span class="math display">\[
I_{ij} = \frac{1}{c_{ii} + c_{jj} - 2c_{ij}}.
\tag{14.18}\]</span></span></p>
<p>Елемент <span class="math inline">\(\sum_{j=1}^{N} 1/I_{ij}\)</span> у рівнянні (<a href="#eq-14-16">Рівняння&nbsp;<span>14.16</span></a>) можна переписати наступним чином:</p>
<p><span id="eq-14-19"><span class="math display">\[
\sum_{j=1}^{N}c_{ii} + c_{jj} - 2c_{ij} = Nc_{ii} + T - 2R,
\tag{14.19}\]</span></span></p>
<p>де <span class="math inline">\(T = \sum_{j=1}^{N}c_{jj}\)</span> і <span class="math inline">\(R = \sum_{j=1}^{N}c_{ij}\)</span>.</p>
<p>Отже, ступінь інформаційності вузла <span class="math inline">\(i\)</span> може бути представлений як</p>
<p><span id="eq-14-20"><span class="math display">\[
I_i = \left[ \frac{1}{N}(Nc_{ii} + T - 2R) \right]^{-1} = \left[ c_{ii} + \frac{T-2R}{N} \right]^{-1}.
\tag{14.20}\]</span></span></p>
<p>Схожим чином, для вимірювання глобального ступеню інформаційності ми розглядаємо середнє арифметичне локального ступеню інформаційності:</p>
<p><span id="eq-14-21"><span class="math display">\[
\hat{I} = \frac{1}{N}\sum_{i=1}^{N}I_i.
\tag{14.21}\]</span></span></p>
<div class="cell" data-execution_count="72">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">3</span>], </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">3</span>],</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">3</span>],</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"darkgreen"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-28-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="максимальний-ступінь-посередництва" class="level5" data-number="14.2.2.2.5">
<h5 data-number="14.2.2.2.5" class="anchored" data-anchor-id="максимальний-ступінь-посередництва"><span class="header-section-number">14.2.2.2.5</span> Максимальний ступінь посередництва</h5>
<p>Іншою часто досліджуваною характеристикою вершин на основі шляхів є <strong>ступінь посередництва</strong>, яка вимірює частку всіх найкоротших шляхів у мережі, що проходять від <span class="math inline">\(i\)</span> до <span class="math inline">\(j\)</span> через вершину <span class="math inline">\(k\)</span>. Для загальної кількості найкоротших шляхів між вершинами <span class="math inline">\(i\)</span> та <span class="math inline">\(j\)</span>, позначених як <span class="math inline">\(\sigma(i,j)\)</span>, та найкоротших шляхів, що проходять через дану вершину <span class="math inline">\(k(\sigma(i, j | k))\)</span>, ступінь посередництва можна визначити як</p>
<p><span id="eq-14-22"><span class="math display">\[
b_k = \sum_{i,j=1; i,j \neq k}^{N} \frac{\sigma(i, j | k)}{\sigma(i, j)}.
\tag{14.22}\]</span></span></p>
<p>Щоб віднайти найбільшу кількість інформації, що проходить через конкретний <span class="math inline">\(k\)</span>-й, ми вимірюємо максимальний ступінь посередництва, розглядаючи кожен <span class="math inline">\(k\)</span>-ий вузол:</p>
<p><span id="eq-14-23"><span class="math display">\[
B = \max_{i=1,...,N}b_{i}.
\tag{14.23}\]</span></span></p>
<div class="cell" data-execution_count="73">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">4</span>], </span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">4</span>],</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">4</span>],</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"chocolate"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-29-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="середній-ступінь-гармонійності" class="level5" data-number="14.2.2.2.6">
<h5 data-number="14.2.2.2.6" class="anchored" data-anchor-id="середній-ступінь-гармонійності"><span class="header-section-number">14.2.2.2.6</span> Середній ступінь гармонійності</h5>
<p>Марчіорі та Латора <span class="citation" data-cites="PhysRevLett.87.198701">&nbsp;[<a href="references.html#ref-PhysRevLett.87.198701" role="doc-biblioref">27</a>]</span> запропонували міру, подібну до (<a href="#eq-14-14">Рівняння&nbsp;<span>14.14</span></a>), яка називається <strong>ступенем гармонійності</strong>. Для заданого вузла <span class="math inline">\(j\)</span> вона може бути визначена як</p>
<p><span id="eq-14-24"><span class="math display">\[
Hc_{j} = \sum_{i=1, i \neq j}^{N} \left( l_{ij} \right)^{-1},
\tag{14.24}\]</span></span></p>
<p>де <span class="math inline">\((l_{ij})^{-1}=0\)</span>, якщо між вузлами <span class="math inline">\(i\)</span> та <span class="math inline">\(j\)</span> немає шляху. Середній ступінь гармонійності визначається через середнє арифметичне локальних ступенів гармонійності.</p>
<div class="cell" data-execution_count="74">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">5</span>], </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">5</span>],</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">5</span>],</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"black"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-30-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="асортативність" class="level4" data-number="14.2.2.3">
<h4 data-number="14.2.2.3" class="anchored" data-anchor-id="асортативність"><span class="header-section-number">14.2.2.3</span> Асортативність</h4>
<div class="cell" data-execution_count="85">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>Assortativity <span class="op">=</span> []</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>AvgDegreeConnectivity <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="86">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="st">'left_to_right'</span>).build(fragm)</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>        nxg_dir <span class="op">=</span> g.as_networkx()</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="st">'left_to_right'</span>).build(fragm)</span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>        nxg_dir <span class="op">=</span> g.as_networkx()</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розрахунок асортативності</span></span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>    assort <span class="op">=</span> nx.degree_pearson_correlation_coefficient(nxg_dir)</span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># середня степенева зв'язність</span></span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a>    avg_deg_con <span class="op">=</span> np.mean(<span class="bu">list</span>(nx.average_degree_connectivity(nxg_dir, source<span class="op">=</span><span class="st">"out"</span>, target<span class="op">=</span><span class="st">"in"</span>).values()))</span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a>    Assortativity.append(assort)</span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>    AvgDegreeConnectivity.append(avg_deg_con)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [00:30&lt;00:00, 102.76it/s]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="87">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'Assortativity'</span>, <span class="st">'AvgDegreeConnectivity'</span>]</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [Assortativity, AvgDegreeConnectivity]</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$r$'</span>, <span class="vs">r'$\langle d_</span><span class="sc">{nn}</span><span class="vs">^</span><span class="sc">{w}</span><span class="vs"> \rangle$'</span>]</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="середня-степенева-звязність" class="level5" data-number="14.2.2.3.1">
<h5 data-number="14.2.2.3.1" class="anchored" data-anchor-id="середня-степенева-звязність"><span class="header-section-number">14.2.2.3.1</span> Середня степенева зв’язність</h5>
<p>Середня степенева зв’язність <span class="math inline">\(d_{nn}(d)\)</span> для вершин зі ступенем <span class="math inline">\(d\)</span> є ще однією мірою, яка використовується для дослідження структури мереж <span class="citation" data-cites="PhysRevLett.87.258701">&nbsp;[<a href="references.html#ref-PhysRevLett.87.258701" role="doc-biblioref">28</a>]</span>. Оскільки вона може бути виражена як <span class="math inline">\(d_{nn}(d) = \sum_{d'}d^{'}P(d^{'}|d)\)</span>, де <span class="math inline">\(P(d^{'}| 𝑑)\)</span> — умовна ймовірність того, що дана вершина зі ступенем <span class="math inline">\(d\)</span> пов’язана з вершиною зі ступенем <span class="math inline">\(d^{'}\)</span>. Ця величина виражає кореляцію між степенями зв’язаних вершин <span class="citation" data-cites="protein_net">&nbsp;[<a href="references.html#ref-protein_net" role="doc-biblioref">29</a>]</span>. За відсутності кореляцій між степенями, <span class="math inline">\(𝑃(𝑑^{'}| 𝑑)\)</span> не залежить від <span class="math inline">\(𝑑\)</span>, а також від середнього степеня найближчих сусідів, тобто <span class="math inline">\(d_{nn}(𝑑)=\text{const}\)</span> <span class="citation" data-cites="PhysRevLett.87.258701">&nbsp;[<a href="references.html#ref-PhysRevLett.87.258701" role="doc-biblioref">28</a>]</span>. За наявності кореляцій поведінка <span class="math inline">\(d_{nn}(d)\)</span> визначає два загальні класи мереж. Якщо <span class="math inline">\(d_{nn}(d)\)</span> є зростаючою функцією від <span class="math inline">\(d\)</span>, тоді вершини з високим (низьким) ступенем мають більшу ймовірність бути пов’язаними з вершинами з вищим (нижчим) ступенем. Ця властивість у різних галузях науки називається <em>асортативним змішуванням</em> <span class="citation" data-cites="PhysRevLett.89.208701">&nbsp;[<a href="references.html#ref-PhysRevLett.89.208701" role="doc-biblioref">30</a>]</span>. Навпаки, спадна поведінка <span class="math inline">\(d_{nn}(d)\)</span> визначає <em>дизасортативне змішування</em>, в тому сенсі, що вершини з високим (низьким) степенем мають більшість сусідів з низьким (високим) степенем вершин.</p>
<p>Міру такої сортативності чи дизасортативності для сусідів певної вершини <span class="math inline">\(i\)</span> можна визначити як <strong>середню степеневу зв’язність</strong> (середньозважений ступінь найближчого сусіда):</p>
<p><span id="eq-14-25"><span class="math display">\[
d_{i}^{w} = \frac{1}{s_i}\sum_{j=1}^{N}A_{ij}w_{ij}d_{j},
\tag{14.25}\]</span></span></p>
<p>де <span class="math inline">\(s_i = \sum_{j=1}^{N}A_{ij}w_{ij}\)</span> — це “сила” <span class="math inline">\(i\)</span>-го вузла; <span class="math inline">\(A_{ij}\)</span> — це елемент матриці суміжності <span class="math inline">\(A\)</span>; <span class="math inline">\(w_{ij}\)</span> — це вага ребра <span class="math inline">\(e_{ij}\)</span> (у нашому випадку вона дорівнює 1); <span class="math inline">\(d_j\)</span> представляє ступінь вершини <span class="math inline">\(j\)</span>-го сусіда.</p>
<p>Загалом, це рівняння вимірює ступінь тяжіння сусідів з високим або низьким ступенем вершини один до одного відносно величини фактичних взаємодій.</p>
<div class="cell" data-execution_count="89">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">1</span>], </span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">1</span>],</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">1</span>],</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"darkorange"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-34-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="ступінь-асортативності" class="level5" data-number="14.2.2.3.2">
<h5 data-number="14.2.2.3.2" class="anchored" data-anchor-id="ступінь-асортативності"><span class="header-section-number">14.2.2.3.2</span> Ступінь асортативності</h5>
<p>Інша форма асортативного змішування залежить від однієї або декількох скалярних властивостей вершин мережі. Для його обчислення ми визначаємо матрицю <span class="math inline">\(e_{ij}\)</span>, яка задовольняє правилам додавання: <span class="math inline">\(\sum_{ij}e_{ij}=1\)</span>, <span class="math inline">\(\sum_{j}e_{ij}=a_i\)</span>, <span class="math inline">\(\sum_{i}e_{ij}=b_j\)</span>, де <span class="math inline">\(a_i\)</span> та <span class="math inline">\(b_j\)</span> — частки ребер, які починаються та закінчуються у вершинах <span class="math inline">\(i\)</span> та <span class="math inline">\(j\)</span>. Розрахувавши коефіцієнт кореляції Пірсона, можна визначити ступінь асортативності <span class="citation" data-cites="PhysRevLett.89.208701">&nbsp;[<a href="references.html#ref-PhysRevLett.89.208701" role="doc-biblioref">30</a>]</span>. Таким чином, цей коефіцієнт асортативності обчислюється як</p>
<p><span id="eq-14-26"><span class="math display">\[
r = \frac{\sum_{xy}xy(e_{xy} - a_{x}b_{y})}{\sigma_{a}\sigma_{b}},
\tag{14.26}\]</span></span></p>
<p>де <span class="math inline">\(\sigma_{a}\)</span> та <span class="math inline">\(\sigma_{b}\)</span> визначають стандартні відхилення розподілів <span class="math inline">\(a_x\)</span> та <span class="math inline">\(b_y\)</span>; <span class="math inline">\(-1 \leq r \leq 1\)</span>, де <span class="math inline">\(r&lt;0\)</span> вказує на вищу дизасортативність, <span class="math inline">\(r&gt;0\)</span> демонструє вищу асортативність, а <span class="math inline">\(r=0\)</span> говорить про відсутність асортативності між вершинами.</p>
<div class="cell" data-execution_count="88">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"darkgreen"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-35-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="кластеризація" class="level4" data-number="14.2.2.4">
<h4 data-number="14.2.2.4" class="anchored" data-anchor-id="кластеризація"><span class="header-section-number">14.2.2.4</span> Кластеризація</h4>
<div class="cell" data-execution_count="79">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>Transitivity <span class="op">=</span> []</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>AvgClustering <span class="op">=</span> []</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>AvgSquareClustering <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="80">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># транзитивність</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>    trans <span class="op">=</span> nx.transitivity(nxg)</span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># глобальний коефіцієнт кластеризації</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>    avg_clust <span class="op">=</span> nx.average_clustering(nxg)</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a>    <span class="co"># коефіцієнт квадратичної кластеризації </span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>    avg_sqr_clust <span class="op">=</span> np.mean(<span class="bu">list</span>(nx.square_clustering(nxg).values()))</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>    Transitivity.append(trans)</span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>    AvgClustering.append(avg_clust)</span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>    AvgSquareClustering.append(avg_sqr_clust)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [18:11&lt;00:00,  2.90it/s]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="81">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'AvgClustering'</span>, <span class="st">'Transitivity'</span>, <span class="st">'AvgSquareClustering'</span>]</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [AvgClustering, Transitivity, AvgSquareClustering]</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$\langle C_3 \rangle$'</span>, <span class="vs">r'$T$'</span>, <span class="vs">r'$\langle C_4 \rangle$'</span>]</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="коефіцієнт-глобальної-кластеризації" class="level5" data-number="14.2.2.4.1">
<h5 data-number="14.2.2.4.1" class="anchored" data-anchor-id="коефіцієнт-глобальної-кластеризації"><span class="header-section-number">14.2.2.4.1</span> Коефіцієнт глобальної кластеризації</h5>
<p>Для того, щоб охарактеризувати щільність зв’язків між сусідами вершини <span class="math inline">\(i\)</span>, ми можемо використати коефіцієнт локальної кластеризації:</p>
<p><span id="eq-14-26"><span class="math display">\[
C_{i}^{3} = \frac{\sum_{k,j=1}^{N}A_{ik}A_{kj}A_{ji}}{d_i(d_i - 1)},
\tag{14.27}\]</span></span></p>
<p>де чисельник позначає кількість закритих трикутників, що містять вершину <span class="math inline">\(i\)</span>.</p>
<p>Ми можемо розглядати <strong>глобальний коефіцієнт кластеризації</strong>, як середнє арифметичне локального коефіцієнта кластеризації трикутників <span class="citation" data-cites="watts1998collective">&nbsp;[<a href="references.html#ref-watts1998collective" role="doc-biblioref">31</a>]</span>:</p>
<p><span id="eq-14-27"><span class="math display">\[
C^{3} = \frac{1}{N}\sum_{i=1}^{N}C_{i}^{3},
\tag{14.28}\]</span></span></p>
<p>що вимірює середню схильність системи до утворення трикутних кластерів.</p>
<div class="cell" data-execution_count="82">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"magenta"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-39-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="транзитивність" class="level5" data-number="14.2.2.4.2">
<h5 data-number="14.2.2.4.2" class="anchored" data-anchor-id="транзитивність"><span class="header-section-number">14.2.2.4.2</span> Транзитивність</h5>
<p>У випадку дуже неоднорідних степенів, тобто безмасштабних мереж, де лише кілька вершин мають високу степінь, а інші — низьку (<span class="math inline">\(d_i &lt; 2\)</span>), вершини з низькою степенню будуть брати участь переважно в обчисленні локального коефіцієнта кластеризації, що може призвести до недооцінки трикутних кластерів у мережі. Баррат і Вайгт <span class="citation" data-cites="barrat2000properties">&nbsp;[<a href="references.html#ref-barrat2000properties" role="doc-biblioref">32</a>]</span> запропонували альтернативний підхід для подолання такої проблеми, який отримав назву <strong>транзитивності</strong> <span class="citation" data-cites="BOCCALETTI2006175">&nbsp;[<a href="references.html#ref-BOCCALETTI2006175" role="doc-biblioref">33</a>]</span>:</p>
<p><span id="eq-14-28"><span class="math display">\[
T = \frac{\sum_{k,j=1}^{N}A_{ik}A_{kj}A_{ji}}{\sum_{i,k,j=1}^{N}A_{ik}A_{ji}}.
\tag{14.29}\]</span></span></p>
<p>У реальних мережах ми можемо зіткнутися з випадками, коли зв’язані сусіди в мережі можуть утворювати різні кліки (форми кластеризації). Класичний коефіцієнт локальної кластеризації, який вимірює ймовірність знаходження трикутників, зазвичай відповідає одностороннім мережам. Однак він не може бути сформований у двосторонніх мережах <span class="citation" data-cites="HOLME2004155 PhysRevE.68.056107">&nbsp;[<a href="references.html#ref-HOLME2004155" role="doc-biblioref">34</a>,<a href="references.html#ref-PhysRevE.68.056107" role="doc-biblioref">35</a>]</span>. Складні структури односторонніх, двосторонніх і багатосторонніх мереж реальної системи можуть призвести до утворення кластерів набагато вищого порядку.</p>
<div class="cell" data-execution_count="83">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">1</span>], </span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">1</span>],</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">1</span>],</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"crimson"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-40-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="коефіцієнт-квадратичної-кластеризації" class="level5" data-number="14.2.2.4.3">
<h5 data-number="14.2.2.4.3" class="anchored" data-anchor-id="коефіцієнт-квадратичної-кластеризації"><span class="header-section-number">14.2.2.4.3</span> Коефіцієнт квадратичної кластеризації</h5>
<p>Подібно до <span class="math inline">\(C_{i}^{3}\)</span>, який є класичним коефіцієнтом локальної кластеризації, було запропоновано кількісно оцінити коефіцієнт кластеризації <span class="math inline">\(C_{i}^{4}\)</span> <span class="citation" data-cites="PhysRevE.72.056127">&nbsp;[<a href="references.html#ref-PhysRevE.72.056127" role="doc-biblioref">36</a>]</span>, який відповідає ймовірності знайти “квадратний” кластер, утворений сусідами вузла <span class="math inline">\(i\)</span>. Тобто, що два сусіди вузла <span class="math inline">\(i\)</span> мають спільного сусіда, відмінного від <span class="math inline">\(i\)</span>. Для кожної вершини <span class="math inline">\(i\)</span> вона може бути обчислена як</p>
<p><span id="eq-14-29"><span class="math display">\[
C_{i}^{4} = \frac{\sum_{k=1}^{d_i}\sum_{j=k+1}^{d_i}q_i(k, j)}{\sum_{k=1}^{d_i}\sum_{j=k+1}^{d_i}[a_{i}(k, j) + q_i(k, j)]},
\tag{14.30}\]</span></span></p>
<p>де <span class="math inline">\(q_i(k, j)\)</span> представляє кількість спостережуваних квадратних кластерів; <span class="math inline">\(a_i(k, j) = \left( d_k - (1+q_{i}(k, j) + \theta_{ki}) \right) + \left( d_{j} - (1 + q_{i}(k, j) + \theta_{kj}) \right)\)</span>; <span class="math inline">\(\theta_{kj}=1\)</span> якщо <span class="math inline">\(k\)</span> і <span class="math inline">\(j\)</span> є зв’язними і 0 у зворотньому випадку <span class="citation" data-cites="ZHANG20086869">&nbsp;[<a href="references.html#ref-ZHANG20086869" role="doc-biblioref">37</a>]</span>. Схожим чином до рівняння (<a href="#eq-14-27">Рівняння&nbsp;<span>14.28</span></a>), ми можемо визначити <strong>глобальний коефіцієнт квадратичної кластеризації</strong> як</p>
<p><span id="eq-14-30"><span class="math display">\[
C^{4} = \frac{1}{N}\sum_{i=1}^{N}C_{i}^{4}.
\tag{14.31}\]</span></span></p>
<div class="cell" data-execution_count="84">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">2</span>], </span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">2</span>],</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">2</span>],</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"orange"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-41-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="звязність" class="level4" data-number="14.2.2.5">
<h4 data-number="14.2.2.5" class="anchored" data-anchor-id="звязність"><span class="header-section-number">14.2.2.5</span> Зв’язність</h4>
<div class="cell" data-execution_count="90">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>Density <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="91">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розрахунок щільності</span></span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    dens <span class="op">=</span> nx.density(nxg)</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>    Density.append(dens)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [00:09&lt;00:00, 322.00it/s]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="92">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'Density'</span>]</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [Density]</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$\rho$'</span>]</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="щільність" class="level5" data-number="14.2.2.5.1">
<h5 data-number="14.2.2.5.1" class="anchored" data-anchor-id="щільність"><span class="header-section-number">14.2.2.5.1</span> Щільність</h5>
<p>Щільність графа може допомогти визначити, наскільки густо заселений різними ребрами представлений граф. Чим вона вища, тим більшою є зв’язність досліджуваного графа. Її можна обчислити як</p>
<p><span id="eq-14-31"><span class="math display">\[
\rho = \frac{E}{E_{max}},
\tag{14.32}\]</span></span></p>
<p>де <span class="math inline">\(E\)</span> дорівнює кількості ребер у <span class="math inline">\(G\)</span>, а <span class="math inline">\(E_{max}=N(N-1)/2\)</span> — це максимальна кількість ребер у простому ненаправленому графі.</p>
<div class="cell" data-execution_count="93">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"black"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-45-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="міри-відстані" class="level4" data-number="14.2.2.6">
<h4 data-number="14.2.2.6" class="anchored" data-anchor-id="міри-відстані"><span class="header-section-number">14.2.2.6</span> Міри відстані</h4>
<div class="cell" data-execution_count="94">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>Diameter <span class="op">=</span> []</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>Radius <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="95">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розрахунок діаметра</span></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>    diameter <span class="op">=</span> nx.diameter(nxg)</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розрахунок радіуса</span></span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    rad <span class="op">=</span> nx.radius(nxg)</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    Diameter.append(diameter)</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    Radius.append(rad)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [05:57&lt;00:00,  8.88it/s]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="104">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'Diameter'</span>, <span class="st">'Radius'</span>]</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [Diameter, Radius]</span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$diam$'</span>, <span class="vs">r'rad'</span>]</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="діаметр" class="level5" data-number="14.2.2.6.1">
<h5 data-number="14.2.2.6.1" class="anchored" data-anchor-id="діаметр"><span class="header-section-number">14.2.2.6.1</span> Діаметр</h5>
<p>Зауважимо, що найкоротший шлях, який є характеристикою відстані між досліджуваними вершинами <span class="math inline">\(i\)</span> та <span class="math inline">\(j\)</span>, може бути використаний для характеристики загального розміру мережі. Величина, яка визначає найбільшу відстань між вершиною <span class="math inline">\(i\)</span> та будь-якою іншою вершиною, називається <strong>ексцентриситетом</strong>:</p>
<p><span id="eq-14-32"><span class="math display">\[
\varepsilon(i) = \max_{j}l_{ij}.
\tag{14.33}\]</span></span></p>
<p>Розмір мережі можна охарактеризувати в термінах <strong>діаметру</strong>, який можна визначити як</p>
<p><span id="eq-14-33"><span class="math display">\[
diam = \max_{i}\varepsilon(i) = \max_{i}\max_{j}l_{ij}.
\tag{14.34}\]</span></span></p>
<div class="cell" data-execution_count="105">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"magenta"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-49-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="радіус" class="level5" data-number="14.2.2.6.2">
<h5 data-number="14.2.2.6.2" class="anchored" data-anchor-id="радіус"><span class="header-section-number">14.2.2.6.2</span> Радіус</h5>
<p>Таким чином, діаметр — це найбільша (максимальна) довжина шляху в мережі. Отже, ми можемо визначити найменший ексцентриситет досліджуваної мережі, який називається <strong>радіусом</strong>:</p>
<p><span id="eq-14-34"><span class="math display">\[
rad = \min_{i}\varepsilon(i) = \min_{i}\max_{j}l_{ij}.
\tag{14.35}\]</span></span></p>
<div class="cell" data-execution_count="106">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">1</span>], </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">1</span>],</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">1</span>],</span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"crimson"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-50-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="ефективність" class="level4" data-number="14.2.2.7">
<h4 data-number="14.2.2.7" class="anchored" data-anchor-id="ефективність"><span class="header-section-number">14.2.2.7</span> Ефективність</h4>
<div class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>LocalEfficiency <span class="op">=</span> []</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>GlobalEfficiency <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="100">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb58-13"><a href="#cb58-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb58-14"><a href="#cb58-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb58-15"><a href="#cb58-15" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb58-16"><a href="#cb58-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-17"><a href="#cb58-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розрахунок локальної ефективності</span></span>
<span id="cb58-18"><a href="#cb58-18" aria-hidden="true" tabindex="-1"></a>    local_eff <span class="op">=</span> nx.local_efficiency(nxg)</span>
<span id="cb58-19"><a href="#cb58-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-20"><a href="#cb58-20" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розрахунок глобальної ефективності</span></span>
<span id="cb58-21"><a href="#cb58-21" aria-hidden="true" tabindex="-1"></a>    glob_eff <span class="op">=</span> nx.global_efficiency(nxg)</span>
<span id="cb58-22"><a href="#cb58-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb58-23"><a href="#cb58-23" aria-hidden="true" tabindex="-1"></a>    LocalEfficiency.append(local_eff)</span>
<span id="cb58-24"><a href="#cb58-24" aria-hidden="true" tabindex="-1"></a>    GlobalEfficiency.append(glob_eff)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [38:39&lt;00:00,  1.37it/s]  </code></pre>
</div>
</div>
<div class="cell" data-execution_count="107">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'LocalEfficiency'</span>, <span class="st">'GlobalEfficiency'</span>]</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [LocalEfficiency, GlobalEfficiency]</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$E_</span><span class="sc">{loc}</span><span class="vs">$'</span>, <span class="vs">r'$E_</span><span class="sc">{glob}</span><span class="vs">$'</span>]</span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb60-8"><a href="#cb60-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a href="#cb60-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb60-10"><a href="#cb60-10" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb60-11"><a href="#cb60-11" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb60-12"><a href="#cb60-12" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="глобальна-ефективність" class="level5" data-number="14.2.2.7.1">
<h5 data-number="14.2.2.7.1" class="anchored" data-anchor-id="глобальна-ефективність"><span class="header-section-number">14.2.2.7.1</span> Глобальна ефективність</h5>
<p>Визначення поведінки в малому світі згідно з Латором та Марчіорі <span class="citation" data-cites="PhysRevLett.87.198701">&nbsp;[<a href="references.html#ref-PhysRevLett.87.198701" role="doc-biblioref">27</a>]</span> можна подати в термінах ефективності <span class="math inline">\(E\)</span> мережі. Ефективність <span class="math inline">\(\varepsilon_{ij}\)</span> між вершинами <span class="math inline">\(i\)</span> та <span class="math inline">\(j\)</span> визначається як <span class="math inline">\(1/l_{ij}\)</span>. Коли <span class="math inline">\(l_{ij}=\infty\)</span> і, послідовно, якщо <span class="math inline">\(1/l_{ij}=0\)</span>, <span class="math inline">\(i\)</span> і <span class="math inline">\(j\)</span> вважаються роз’єднаними. Відповідно до формалізму ефективності, вона може бути кількісно визначена як для глобальних, так і для локальних масштабів <span class="math inline">\(G\)</span>. Латора та Марчіорі підкреслювали, що <span class="math inline">\(1/L\)</span> та <span class="math inline">\(C\)</span> можна розглядати як перші наближення глобальної (<span class="math inline">\(E_{glob}\)</span>) та локальної (<span class="math inline">\(E_{loc}\)</span>) ефективності.</p>
<p>Середню (глобальну) ефективність <span class="math inline">\(G\)</span> можна визначити як</p>
<p><span id="eq-14-35"><span class="math display">\[
E_{glob} = \frac{1}{N(N-1)}\sum_{i,j=1}\left( l_{ij} \right)^{-1}.
\tag{14.36}\]</span></span></p>
<p>Для найбільш ефективного графа, де інформація поширюється найбільш ефективно, <span class="math inline">\(E_{glob}\)</span> набуває максимального значення, а в іншому випадку — мінімального.</p>
<div class="cell" data-execution_count="109">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">1</span>], </span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">1</span>],</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">1</span>],</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"indigo"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-54-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
<section id="локальна-ефективність" class="level5" data-number="14.2.2.7.2">
<h5 data-number="14.2.2.7.2" class="anchored" data-anchor-id="локальна-ефективність"><span class="header-section-number">14.2.2.7.2</span> Локальна ефективність</h5>
<p>Локальна ефективність відіграє роль, подібну до глобального коефіцієнта кластеризації. Локальна ефективність <span class="math inline">\(E_{loc}\)</span> може бути кількісно визначена як</p>
<p><span id="eq-14-36"><span class="math display">\[
E_{loc} = \frac{1}{N}\sum_{i \in G_i}E_{glob}(G_i),
\tag{14.37}\]</span></span></p>
<p>де <span class="math inline">\(G_i\)</span> — локальний підграф <span class="math inline">\(G\)</span>, а <span class="math inline">\(E_{glob}(G_i)\)</span> характеризує ефективність цього конкретного підграфа. Подібно до глобального коефіцієнта кластеризації, <span class="math inline">\(E_{loc}\)</span> визначає, наскільки відмовостійкою є досліджувана система, тобто наскільки ефективним є транспортування інформації між першими сусідами <span class="math inline">\(i\)</span>-го вузла при його видаленні.</p>
<div class="cell" data-execution_count="108">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"orange"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-55-output-1.png" class="img-fluid"></p>
</div>
</div>
</section>
</section>
<section id="найкоротший-шлях" class="level4" data-number="14.2.2.8">
<h4 data-number="14.2.2.8" class="anchored" data-anchor-id="найкоротший-шлях"><span class="header-section-number">14.2.2.8</span> Найкоротший шлях</h4>
<div class="cell" data-execution_count="110">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>AvgPathLength <span class="op">=</span> []</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="111">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> tqdm(<span class="bu">range</span>(<span class="dv">0</span>,length<span class="op">-</span>window,tstep)):</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>    <span class="co"># відбираємо фрагмент</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> time_ser.iloc[i:i<span class="op">+</span>window].copy()  </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>    <span class="co"># виконуємо процедуру трансформації ряду </span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    fragm <span class="op">=</span> transformation(fragm, ret_type)</span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-8"><a href="#cb64-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'classic'</span>:</span>
<span id="cb64-9"><a href="#cb64-9" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> NaturalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb64-10"><a href="#cb64-10" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb64-11"><a href="#cb64-11" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb64-12"><a href="#cb64-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> graph_type <span class="op">==</span> <span class="st">'horizontal'</span>:</span>
<span id="cb64-13"><a href="#cb64-13" aria-hidden="true" tabindex="-1"></a>        g <span class="op">=</span> HorizontalVG(directed<span class="op">=</span><span class="va">None</span>).build(fragm)</span>
<span id="cb64-14"><a href="#cb64-14" aria-hidden="true" tabindex="-1"></a>        pos <span class="op">=</span> g.node_positions()</span>
<span id="cb64-15"><a href="#cb64-15" aria-hidden="true" tabindex="-1"></a>        nxg <span class="op">=</span> g.as_networkx()</span>
<span id="cb64-16"><a href="#cb64-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb64-17"><a href="#cb64-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># розрахунок середньої довжини найкоротшого шляху</span></span>
<span id="cb64-18"><a href="#cb64-18" aria-hidden="true" tabindex="-1"></a>    avg_path_len <span class="op">=</span> nx.average_shortest_path_length(nxg)</span>
<span id="cb64-19"><a href="#cb64-19" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb64-20"><a href="#cb64-20" aria-hidden="true" tabindex="-1"></a>    AvgPathLength.append(avg_path_len)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>100%|██████████| 3170/3170 [03:07&lt;00:00, 16.94it/s]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="112">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>ind_names <span class="op">=</span> [<span class="st">'AvgPathLength'</span>]</span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>indicators <span class="op">=</span> [AvgPathLength]</span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>measure_labels <span class="op">=</span> [<span class="vs">r'$ApLen$'</span>]</span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>file_names <span class="op">=</span> []</span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="bu">len</span>(ind_names)):</span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    name <span class="op">=</span> <span class="ss">f"</span><span class="sc">{</span>ind_names[i]<span class="sc">}</span><span class="ss">_symbol=</span><span class="sc">{</span>symbol<span class="sc">}</span><span class="ss">_wind=</span><span class="sc">{</span>window<span class="sc">}</span><span class="ss">_step=</span><span class="sc">{</span>tstep<span class="sc">}</span><span class="ss">_seriestype=</span><span class="sc">{</span>ret_type<span class="sc">}</span><span class="ss">_graph_type=</span><span class="sc">{</span>graph_type<span class="sc">}</span><span class="ss">"</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a>    np.savetxt(name <span class="op">+</span> <span class="st">".txt"</span>, indicators[i])</span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    file_names.append(name)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="середня-довжина-найкоротшого-шляху" class="level5" data-number="14.2.2.8.1">
<h5 data-number="14.2.2.8.1" class="anchored" data-anchor-id="середня-довжина-найкоротшого-шляху"><span class="header-section-number">14.2.2.8.1</span> Середня довжина найкоротшого шляху</h5>
<p>Звертаючи увагу на довжину найкоротшого шляху між двома вершинами <span class="math inline">\(i\)</span> та <span class="math inline">\(j\)</span>, ми можемо визначити таку міру, як <strong>середня довжина найкоротшого шляху</strong>:</p>
<p><span id="eq-14-37"><span class="math display">\[
ApLen = \frac{1}{N(N-1)}\sum_{i \neq j}l_{ij}.
\tag{14.38}\]</span></span></p>
<div class="cell" data-execution_count="113">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>plot_pair(time_ser.index[window:length:tstep],</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>          time_ser.values[window:length:tstep],</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>          indicators[<span class="dv">0</span>], </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>          ylabel, </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>          measure_labels[<span class="dv">0</span>],</span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>          xlabel,</span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>          file_names[<span class="dv">0</span>],</span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>          clr<span class="op">=</span><span class="st">"deeppink"</span>)</span></code><button title="Копіювати" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="lab_14_files/figure-html/cell-59-output-1.png" class="img-fluid"></p>
</div>
</div>


<div id="refs" class="references csl-bib-body" role="list" style="display: none">
<div id="ref-DONNER2011" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">R. V. Donner, M. Small, J. F. Donges, N. Marwan, Y. Zou, R. Xiang, and J. Kurths, <em><a href="https://doi.org/10.1142/s0218127411029021">Recurrence-Based Time Series Analysis by Means of Complex Network Methods</a></em>, International Journal of Bifurcation and Chaos <strong>21</strong>, 1019 (2011).</div>
</div>
<div id="ref-vg_lacasa" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">L. Lacasa, B. Luque, F. Ballesteros, J. Luque, and J. C. Nuño, <em><a href="https://doi.org/10.1073/pnas.0709247105">From Time Series to Complex Networks: The Visibility Graph</a></em>, Proceedings of the National Academy of Sciences <strong>105</strong>, 4972 (2008).</div>
</div>
<div id="ref-review_econophys" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">A. O. Bielinskyi, O. A. Serdyuk, S. O. Semerikov, and V. N. Soloviev, <em><a href="https://ceur-ws.org/Vol-3048/paper03.pdf">Econophysics of Cryptocurrency Crashes: A Systematic Review</a></em>, in <em>Proceedings of the Selected and Revised Papers of 9th International Conference on Monitoring, Modeling <span>&amp;</span> Management of Emergent Economy <span>(M3E2-MLPEED</span> 2021), Odessa, Ukraine, May 26-28, 2021</em>, edited by A. E. Kiv, V. N. Soloviev, and S. O. Semerikov, Vol. 3048 (CEUR-WS.org, 2021), pp. 31–133.</div>
</div>
<div id="ref-PhysRevE.80.046103" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">B. Luque, L. Lacasa, F. Ballesteros, and J. Luque, <em><a href="https://doi.org/10.1103/PhysRevE.80.046103">Horizontal Visibility Graphs: Exact Results for Random Time Series</a></em>, Phys. Rev. E <strong>80</strong>, 046103 (2009).</div>
</div>
<div id="ref-PhysRevE.94.052309" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">J. Iacovacci and L. Lacasa, <em><a href="https://doi.org/10.1103/PhysRevE.94.052309">Sequential Motif Profile of Natural Visibility Graphs</a></em>, Phys. Rev. E <strong>94</strong>, 052309 (2016).</div>
</div>
<div id="ref-10.1063/1.4927835" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">X. Lan, H. Mo, S. Chen, Q. Liu, and Y. Deng, <em><a href="https://doi.org/10.1063/1.4927835"><span class="nocase">Fast transformation from time series to visibility graphs</span></a></em>, Chaos: An Interdisciplinary Journal of Nonlinear Science <strong>25</strong>, 083105 (2015).</div>
</div>
<div id="ref-BEZSUDNOV201453" class="csl-entry" role="listitem">
<div class="csl-left-margin">[7] </div><div class="csl-right-inline">I. V. Bezsudnov and A. A. Snarskii, <em><a href="https://doi.org/10.1016/j.physa.2014.07.002">From the Time Series to the Complex Networks: The Parametric Natural Visibility Graph</a></em>, Physica A: Statistical Mechanics and Its Applications <strong>414</strong>, 53 (2014).</div>
</div>
<div id="ref-2012-3-030506" class="csl-entry" role="listitem">
<div class="csl-left-margin">[8] </div><div class="csl-right-inline">T. T. Zhou, N. D. Jin, Z. K. Gao, and Y. B. Luo, <em><a href="https://doi.org/10.7498/aps.61.030506">Limited Penetrable Visibility Graph for Establishing Complex Network from Time Series</a></em>, Acta Physica Sinica <strong>61</strong>, 2012-3-030506 (2012).</div>
</div>
<div id="ref-10.1063/5.0048243" class="csl-entry" role="listitem">
<div class="csl-left-margin">[9] </div><div class="csl-right-inline">Q. Xuan, J. Zhou, K. Qiu, D. Xu, S. Zheng, and X. Yang, <em><a href="https://doi.org/10.1063/5.0048243"><span class="nocase">CLPVG: Circular limited penetrable visibility graph as a new network model for time series</span></a></em>, Chaos: An Interdisciplinary Journal of Nonlinear Science <strong>32</strong>, 013130 (2022).</div>
</div>
<div id="ref-Chung:1997" class="csl-entry" role="listitem">
<div class="csl-left-margin">[10] </div><div class="csl-right-inline">F. R. K. Chung, <em><a href="https://mathweb.ucsd.edu/~fan/research/revised.html">Spectral Graph Theory</a></em> (American Mathematical Society, 1997).</div>
</div>
<div id="ref-spec_graph_theory" class="csl-entry" role="listitem">
<div class="csl-left-margin">[11] </div><div class="csl-right-inline">N. Biggs, <em><a href="https://doi.org/10.1112/S0024609397223611">Spectral Graph Theory (CBMS Regional Conference Series in Mathematics 92)</a></em>, Bulletin of the London Mathematical Society <strong>30</strong>, 197 (1998).</div>
</div>
<div id="ref-norm_lapl" class="csl-entry" role="listitem">
<div class="csl-left-margin">[12] </div><div class="csl-right-inline">S. Butler, <em><a href="https://doi.org/10.13001/1081-3810.1185">Interlacing for Weighted Graphs Using the Normalized Laplacian</a></em>, Electronic Journal of Linear Algebra <strong>16</strong>, 90 (2007).</div>
</div>
<div id="ref-PhysRevE.85.016117" class="csl-entry" role="listitem">
<div class="csl-left-margin">[13] </div><div class="csl-right-inline">G. Bounova and O. de Weck, <em><a href="https://doi.org/10.1103/PhysRevE.85.016117">Overview of Metrics and Their Correlation Patterns for Multiple-Metric Topology Analysis on Heterogeneous Graph Ensembles</a></em>, Phys. Rev. E <strong>85</strong>, 016117 (2012).</div>
</div>
<div id="ref-gutman1978energy" class="csl-entry" role="listitem">
<div class="csl-left-margin">[14] </div><div class="csl-right-inline">I. Gutman, <em>The Energy of a Graph</em>, (1978).</div>
</div>
<div id="ref-cvetkovic1980spectra" class="csl-entry" role="listitem">
<div class="csl-left-margin">[15] </div><div class="csl-right-inline">D. M. Cvetkovic, M. Doob, and H. Sachs, <em>Spectra of Graphs. Theory and Application</em>, (1980).</div>
</div>
<div id="ref-5740372" class="csl-entry" role="listitem">
<div class="csl-left-margin">[16] </div><div class="csl-right-inline">J. Wu, M. Barahona, Y.-J. Tan, and H.-Z. Deng, <em><a href="https://doi.org/10.1109/TSMCA.2011.2116117">Spectral Measure of Structural Robustness in Complex Networks</a></em>, IEEE Transactions on Systems, Man, and Cybernetics - Part A: Systems and Humans <strong>41</strong>, 1244 (2011).</div>
</div>
<div id="ref-Wu_Jun_2010" class="csl-entry" role="listitem">
<div class="csl-left-margin">[17] </div><div class="csl-right-inline">W. Jun, M. Barahona, T. Yue-Jin, and D. Hong-Zhong, <em><a href="https://doi.org/10.1088/0256-307X/27/7/078902">Natural Connectivity of Complex Networks</a></em>, Chinese Physics Letters <strong>27</strong>, 078902 (2010).</div>
</div>
<div id="ref-E_Estrada_2006" class="csl-entry" role="listitem">
<div class="csl-left-margin">[18] </div><div class="csl-right-inline">E. Estrada, <em><a href="https://doi.org/10.1209/epl/i2005-10441-3">Spectral Scaling and Good Expansion Properties in Complex Networks</a></em>, Europhysics Letters <strong>73</strong>, 649 (2006).</div>
</div>
<div id="ref-doi:10.1137/1.9781611971262" class="csl-entry" role="listitem">
<div class="csl-left-margin">[19] </div><div class="csl-right-inline">A. Berman and R. J. Plemmons, <em><a href="https://doi.org/10.1137/1.9781611971262">Nonnegative Matrices in the Mathematical Sciences</a></em> (Society for Industrial; Applied Mathematics, 1994).</div>
</div>
<div id="ref-Schoenberg1969" class="csl-entry" role="listitem">
<div class="csl-left-margin">[20] </div><div class="csl-right-inline">I. J. Schoenberg, <em><a href="https://doi.org/10.1007/978-1-4615-4819-5_23">Publications of Edmund Landau</a></em>, in <em>Number Theory and Analysis: A Collection of Papers in Honor of Edmund Landau (1877–1938)</em>, edited by P. Turán (Springer US, Boston, MA, 1969), pp. 335–355.</div>
</div>
<div id="ref-wei1952algebraic" class="csl-entry" role="listitem">
<div class="csl-left-margin">[21] </div><div class="csl-right-inline">T. H. Wei, <em>The Algebraic Foundations of Ranking Theory</em> (University of Cambridge, 1952).</div>
</div>
<div id="ref-760e07d1-fd0d-3ce0-afae-f7ab9cd57766" class="csl-entry" role="listitem">
<div class="csl-left-margin">[22] </div><div class="csl-right-inline">M. G. Kendall, <em><a href="http://www.jstor.org/stable/3001479">Further Contributions to the Theory of Paired Comparisons</a></em>, Biometrics <strong>11</strong>, 43 (1955).</div>
</div>
<div id="ref-berge1958" class="csl-entry" role="listitem">
<div class="csl-left-margin">[23] </div><div class="csl-right-inline">C. Berge, <em>Théorie Des Graphes Et Ses Applications</em> (Dunod, 1958).</div>
</div>
<div id="ref-35397813-90c1-3806-8d5d-a07b3340ac3d" class="csl-entry" role="listitem">
<div class="csl-left-margin">[24] </div><div class="csl-right-inline">P. Bonacich, <em><a href="http://www.jstor.org/stable/270732">Technique for Analyzing Overlapping Memberships</a></em>, Sociological Methodology <strong>4</strong>, 176 (1972).</div>
</div>
<div id="ref-wikipediaArnoldiIteration" class="csl-entry" role="listitem">
<div class="csl-left-margin">[25] </div><div class="csl-right-inline">Wikipedia, <em>Arnoldi Iteration</em>.</div>
</div>
<div id="ref-STEPHENSON19891" class="csl-entry" role="listitem">
<div class="csl-left-margin">[26] </div><div class="csl-right-inline">K. Stephenson and M. Zelen, <em><a href="https://doi.org/10.1016/0378-8733(89)90016-6">Rethinking Centrality: Methods and Examples</a></em>, Social Networks <strong>11</strong>, 1 (1989).</div>
</div>
<div id="ref-PhysRevLett.87.198701" class="csl-entry" role="listitem">
<div class="csl-left-margin">[27] </div><div class="csl-right-inline">V. Latora and M. Marchiori, <em><a href="https://doi.org/10.1103/PhysRevLett.87.198701">Efficient Behavior of Small-World Networks</a></em>, Phys. Rev. Lett. <strong>87</strong>, 198701 (2001).</div>
</div>
<div id="ref-PhysRevLett.87.258701" class="csl-entry" role="listitem">
<div class="csl-left-margin">[28] </div><div class="csl-right-inline">R. Pastor-Satorras, A. Vázquez, and A. Vespignani, <em><a href="https://doi.org/10.1103/PhysRevLett.87.258701">Dynamical and Correlation Properties of the Internet</a></em>, Phys. Rev. Lett. <strong>87</strong>, 258701 (2001).</div>
</div>
<div id="ref-protein_net" class="csl-entry" role="listitem">
<div class="csl-left-margin">[29] </div><div class="csl-right-inline">S. Maslov and K. Sneppen, <em><a href="https://doi.org/10.1126/science.1065103">Specificity and Stability in Topology of Protein Networks</a></em>, Science <strong>296</strong>, 910 (2002).</div>
</div>
<div id="ref-PhysRevLett.89.208701" class="csl-entry" role="listitem">
<div class="csl-left-margin">[30] </div><div class="csl-right-inline">M. E. J. Newman, <em><a href="https://doi.org/10.1103/PhysRevLett.89.208701">Assortative Mixing in Networks</a></em>, Phys. Rev. Lett. <strong>89</strong>, 208701 (2002).</div>
</div>
<div id="ref-watts1998collective" class="csl-entry" role="listitem">
<div class="csl-left-margin">[31] </div><div class="csl-right-inline">D. J. Watts and S. H. Strogatz, <em><a href="https://doi.org/10.1038/30918">Collective Dynamics of ’Small-World’ Networks</a></em>, Nature <strong>393</strong>, 440 (1998).</div>
</div>
<div id="ref-barrat2000properties" class="csl-entry" role="listitem">
<div class="csl-left-margin">[32] </div><div class="csl-right-inline">A. Barrat and M. Weigt, <em><a href="https://doi.org/10.1007/s100510050067">On the Properties of Small-World Network Models</a></em>, The European Physical Journal B-Condensed Matter and Complex Systems <strong>13</strong>, 547 (2000).</div>
</div>
<div id="ref-BOCCALETTI2006175" class="csl-entry" role="listitem">
<div class="csl-left-margin">[33] </div><div class="csl-right-inline">S. Boccaletti, V. Latora, Y. Moreno, M. Chavez, and D.-U. Hwang, <em><a href="https://doi.org/10.1016/j.physrep.2005.10.009">Complex Networks: Structure and Dynamics</a></em>, Physics Reports <strong>424</strong>, 175 (2006).</div>
</div>
<div id="ref-HOLME2004155" class="csl-entry" role="listitem">
<div class="csl-left-margin">[34] </div><div class="csl-right-inline">P. Holme, C. R. Edling, and F. Liljeros, <em><a href="https://doi.org/10.1016/j.socnet.2004.01.007">Structure and Time Evolution of an Internet Dating Community</a></em>, Social Networks <strong>26</strong>, 155 (2004).</div>
</div>
<div id="ref-PhysRevE.68.056107" class="csl-entry" role="listitem">
<div class="csl-left-margin">[35] </div><div class="csl-right-inline">P. Holme, F. Liljeros, C. R. Edling, and B. J. Kim, <em><a href="https://doi.org/10.1103/PhysRevE.68.056107">Network Bipartivity</a></em>, Phys. Rev. E <strong>68</strong>, 056107 (2003).</div>
</div>
<div id="ref-PhysRevE.72.056127" class="csl-entry" role="listitem">
<div class="csl-left-margin">[36] </div><div class="csl-right-inline">P. G. Lind, M. C. González, and H. J. Herrmann, <em><a href="https://doi.org/10.1103/PhysRevE.72.056127">Cycles and Clustering in Bipartite Networks</a></em>, Phys. Rev. E <strong>72</strong>, 056127 (2005).</div>
</div>
<div id="ref-ZHANG20086869" class="csl-entry" role="listitem">
<div class="csl-left-margin">[37] </div><div class="csl-right-inline">P. Zhang, J. Wang, X. Li, M. Li, Z. Di, and Y. Fan, <em><a href="https://doi.org/10.1016/j.physa.2008.09.006">Clustering Coefficient and Community Structure of Bipartite Networks</a></em>, Physica A: Statistical Mechanics and Its Applications <strong>387</strong>, 6869 (2008).</div>
</div>
</div>
</section>
</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Скопійовано!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Скопійовано!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="./lab_13.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Лабораторна робота № 13</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./appa.html" class="pagination-link">
        <span class="nav-page-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">Інструкція зі встановлення Anaconda Navigator</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



</body></html>